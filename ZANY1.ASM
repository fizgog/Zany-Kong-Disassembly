;-------------------------------------------------------------------------
; Zany Kong - Disassembly
;-------------------------------------------------------------------------
; ZANY1 file is loaded at 1A00 and executed at 4300, then relocated down
; to 0A00
; File used is from http://bbcmicro.co.uk/explore.php?id=2478
;-------------------------------------------------------------------------

ORG 0

L0000   = $0000
L0001   = $0001
L0002   = $0002
L0003   = $0003
L0005   = $0005
L0007   = $0007
L000A   = $000A
L000B   = $000B
L000D   = $000D
L000E   = $000E
L000F   = $000F
L0010   = $0010
L0015   = $0015
L001F   = $001F
L0020   = $0020
L0021   = $0021
L0022   = $0022
L0024   = $0024
L0028   = $0028
L0029   = $0029
L0038   = $0038
L003A   = $003A
L003F   = $003F
L0046   = $0046
L0049   = $0049
L004F   = $004F
L0050   = $0050
L0051   = $0051
L0052   = $0052
L0053   = $0053
L0054   = $0054
L0055   = $0055
L0056   = $0056
L0057   = $0057
L0058   = $0058 ; Text Address ?
L0059   = $0059
L005A   = $005A
L005B   = $005B
L005C   = $005C
L005D   = $005D
L005E   = $005E
L005F   = $005F
L0060   = $0060
L0061   = $0061
L0062   = $0062
L0063   = $0063
L0066   = $0066
L0067   = $0067
L0068   = $0068
L0069   = $0069
L006A   = $006A
L006B   = $006B
L006C   = $006C
L006D   = $006D
L006E   = $006E
L006F   = $006F
L0070   = $0070
L0071   = $0071
L0072   = $0072 ; Low byte screen address ?
L0073   = $0073 ; High byte screen address ?
L0074   = $0074
L0075   = $0075
L0076   = $0076
L0077   = $0077
L0078   = $0078
L0079   = $0079
L007A   = $007A
L007B   = $007B
L0080   = $0080
L0081   = $0081
L0082   = $0082
L0083   = $0083
L0084   = $0084
L0085   = $0085
L0086   = $0086
L0087   = $0087
L0088   = $0088
L0089   = $0089
L008A   = $008A
L008B   = $008B
L008C   = $008C
L008D   = $008D
L008E   = $008E
L008F   = $008F
L00C9   = $00C9
L00E9   = $00E9
L00FF   = $00FF
USERV   = $0200
BRKV    = $0202
IRQ1V   = $0204
IRQ2V   = $0206
CLIV    = $0208
BYTEV   = $020A
WORDV   = $020C
WRCHV   = $020E
RDCHV   = $0210
FILEV   = $0212
ARGSV   = $0214
BGETV   = $0216
BPUTV   = $0218
GBPBV   = $021A
FINDV   = $021C
FSCV    = $021E
EVENTV  = $0220
UPTV    = $0222
NETV    = $0224
VDUV    = $0226
KEYV    = $0228
INSV    = $022A
REMV    = $022C
CNPV    = $022E
INDV1   = $0230
INDV2   = $0232
INDV3   = $0234
L0400   = $0400
L0420   = $0420
L0500   = $0500
L0571   = $0571
L058E   = $058E
L0600   = $0600
L060F   = $060F
L0610   = $0610
L0611   = $0611
L0612   = $0612
L0613   = $0613
L0614   = $0614
L0615   = $0615
L0616   = $0616
L0617   = $0617
L0618   = $0618
L0628   = $0628
L0629   = $0629
L062A   = $062A
L0641   = $0641
L0642   = $0642
L0643   = $0643
L0644   = $0644
L0645   = $0645
L0648   = $0648
L0649   = $0649
L064A   = $064A
L064F   = $064F
L0650   = $0650
L0651   = $0651
L0652   = $0652
L0653   = $0653
L0657   = $0657
L06A0   = $06A0
L06B8   = $06B8
L5450   = $5450
L7470   = $7470
L7575   = $7575
L7F20   = $7F20
L89AB   = $89AB
L9490   = $9490
LCDEF   = $CDEF
LD4D0   = $D4D0
LF4F0   = $F4F0
OSWRSC  = $FFB3
OSRDSC  = $FFB9
OSEVEN  = $FFBF
GSINIT  = $FFC2
GSREAD  = $FFC5
NVRDCH  = $FFC8
NNWRCH  = $FFCB
OSFIND  = $FFCE
OSGBPB  = $FFD1
OSBPUT  = $FFD4
OSBGET  = $FFD7
OSARGS  = $FFDA
OSFILE  = $FFDD
OSRDCH  = $FFE0
OSASCI  = $FFE3
OSNEWL  = $FFE7
OSWRCH  = $FFEE
OSWORD  = $FFF1
OSBYTE  = $FFF4
OSCLI   = $FFF7

ORG $1A00
        ; DATA ?
        EQUS $0F,$18,$05,$36,$80,$1F,$07,$78
        EQUS $F0,$36,$40,$10,$1F,$78,$50,$3A
        EQUS $00,$15,$0F,$18,$00,$3A,$C0,$10
        EQUS $0F,$18,$28,$3A,$C0,$10,$0F,$18
        EQUS $87,$3C,$C0,$10,$0F,$18,$AF,$3C
        EQUS $C0,$10,$07,$18,$A3,$46,$C0,$0F
        EQUS $07,$18,$D4,$68,$C0,$0F,$1F,$18
        EQUS $17,$71,$00,$0F,$1F,$78,$50,$3A
        EQUS $00,$15,$1F,$18,$46,$4F,$00,$0F
        EQUS $07,$18,$20,$58,$C0,$0F,$07,$18
        EQUS $BB,$65,$C0,$0F,$07,$18,$CE,$5D
        EQUS $40,$1D,$0F,$18,$CE,$5C,$C0,$1D
        EQUS $07,$18,$BC,$79,$60,$1D,$1F,$78
        EQUS $50,$3A,$00,$15,$07,$18,$CD,$48
        EQUS $60,$1D,$0F,$18,$99,$50,$C0,$1D
        EQUS $07,$18,$44,$6A,$40,$1D,$1F,$78
        EQUS $00,$40,$00,$15,$0F,$18,$88,$44
        EQUS $C0,$1D,$07,$18,$60,$48,$60,$1F
        EQUS $07,$18,$AA,$4C,$C0,$0F,$07,$18
        EQUS $47,$58,$C0,$0F,$1F,$78,$00,$6C
        EQUS $00,$15,$08,$02,$0B,$07,$0E,$06
        EQUS $01,$00,$02,$08,$0C,$04,$00,$04
        EQUS $01,$04,$01,$05,$02,$0C,$00,$08
        EQUS $02,$04,$05,$09,$0D,$05,$03,$0B
        EQUS $0A,$06,$0A,$00,$02,$02,$0C,$0C
        EQUS $00,$0C,$0C,$04,$08,$04,$0C,$0C
        EQUS $0C,$08,$0C,$0C,$00,$0C,$0C,$00
        EQUS $07,$07,$03,$01,$09,$08,$0C,$0C
        EQUS $45,$45,$45,$45,$00,$00,$00,$00
        EQUS $00,$00,$00,$CF,$00,$00,$00,$00
        EQUS $00,$00,$00,$CF,$00,$00,$00,$00
        EQUS $8A,$8A,$8A,$8A,$00,$00,$00,$00
       
.L0B00  ; Sound Effect 1
        EQUS $12,$00,$02,$00,$0F,$00,$02,$00
.L0B08  ; Sound Effect 2
        EQUS $13,$00,$04,$00,$64,$00,$14,$00
.L0B10  ; Sound Effect 3
        EQUS $11,$00,$03,$00,$46,$00,$10,$00
.L0B18  ; Sound Effect 4
        EQUS $11,$00,$01,$00,$96,$00,$0C,$00
.L0B20  ;Sound Effect 5
        EQUS $10,$00,$01,$00,$08,$00,$03,$00
.L0B28  ; Sound Effect 6
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
.L0B30  ; Sound Effect 7
        EQUS $12,$00,$F3,$FF
.L0B34  ; Pitch and duration are altered with code
        EQUS $95,$00,$04,$00

        EQUS "TFOS RALOS "
        EQUS $01,$04,$1F                ; Tab(4,1)
        EQUS "serocS  hgiH"
        EQUS $05,$04,$1F                ; Tab(4,5)
        EQUS "GNOK  YNAZ"
        EQUS $03,$05,$1F                ; Tab(5,3)
        EQUS " YNAZ"
        EQUS $01

.L0B68
        EQUS $A3,$93,$14,$00,$00,$1F,$28,$22

;-------------------------------------------------------------------------
; PlaySound
;-------------------------------------------------------------------------
;-------------------------------------------------------------------------
; On entry  : X contains LSB
; On exit   : 
;-------------------------------------------------------------------------
.PlaySound
        LDA #$07
        LDY #$0B
        JMP OSWORD          ; Play Sound

;-------------------------------------------------------------------------

        ; DATA
        ; 0B77
        EQUB $00,$20,$4E,$18,$11,$1F    ; Tab(17,24)
        EQUB $46,$46,$18,$11,$1F        ; Tab(17,24)
        EQUS "O: 'S' dnuoS"
        EQUB $18,$05,$1F                ; Tab(5,24)
        EQUS ".yalp  ot NOTTUB KCITSYOJ  ro RAB ECAPS sserP"
        EQUB $1D,$00,$1F                ; Tab(0,29)
        EQUS "? bmilc uoy nac"
        EQUB $1B,$04,$1F                ; Tab(4,27)
        EQUS "hgih woH"
        EQUB $1A,$04,$1F                ; Tab(4,26)
        EQUB $0C,$1A
        EQUS "revO "
        EQUB $0A
        EQUS " emaG "

        EQUS $0A,$0C,$0C,$0C,$11,$07,$1C,$06
        EQUS $0E,$1D,$05,$1C,$00,$00,$00,$00
        EQUS $00,$FF,$4B,$11,$FF,$FF,$10,$28
        EQUS $45,$82,$FF,$FF,$F0,$F0,$40,$A0
        EQUS $10,$00,$F0,$F0,$00,$00,$00,$00
        EQUS $00,$42,$42,$42,$7E,$42,$42,$42
        EQUS $7E,$42,$42,$42,$18,$3C,$18,$3C
        EQUS $5A,$3C,$24,$66,$81,$42,$24,$18
        EQUS $18,$24,$42,$81,$FF,$FF,$08,$08
        EQUS $08,$08,$FF,$FF,$30,$48,$94,$94
        EQUS $A4,$A4,$48,$30

.L0C40
        EQUS $EB,$BA,$A3,$72,$5B,$2A,$00,$00

.L0C48
        EQUS $FA,$FE,$06,$00

.L0C4C
        EQUS $04,$F7,$05,$F8

.L0C50
        EQUS $A0,$C0,$80,$E0

.L0C54
        EQUS $00,$40,$80,$C0,$00,$40,$80,$C0
        EQUS $00

.L0C5D
        EQUS $0D,$0D,$0D,$0D,$0E,$0E,$0E,$0E
        EQUS $10

.L0C66
        EQUS $22,$62,$A2,$E2

.L0C6A
        EQUS $98,$00,$00

.L0C6D
        EQUS $C1,$6B

.L0C6F
        EQUS $60

.L0C70
        EQUS $20,$20,$60,$00

.L0C74
        EQUS $5A,$48,$00,$98

.L0C78
        EQUS $73,$73,$C9,$C9

.L0C7C
        EQUS $18,$46

.L0C7E
        EQUS $FF

.L0C7F
        EQUS $01

.L0C80
        EQUS $00

.L0C81
        EQUS $02,$00,$FE,$00

.L0C85
        EQUS $FE

.L0C86
        EQUS $00,$02,$00,$02

.L0C8A
        EQUS $06,$50,$32,$50

.L0C8E
        EQUS $D8,$66,$6C

.L0C91
        EQUS $99,$D1,$A6,$7B,$50

.L0C96
        EQUS $28,$70,$E6,$C3,$98,$6D,$42,$FD
        EQUS $07,$01,$03,$F8,$03,$FA,$FA,$00
        EQUS $04,$00,$0A,$07,$0A,$07,$0A,$0A
        EQUS $0A,$0A,$20,$C0,$00,$C0,$15,$14
        EQUS $14,$14,$C0,$E0,$E0,$E0,$38,$18
        EQUS $38,$18,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$AA,$55,$AA,$55,$AA,$55
        EQUS $AA,$55,$F0,$F0,$00,$00,$50,$A0
        EQUS $F0,$F0,$F0,$F0,$50,$A0,$00,$00
        EQUS $F0,$F0,$F0,$F0,$00,$A0,$50,$00
        EQUS $F0,$F0,$F0,$F0,$00,$00,$50,$A0
        EQUS $F0,$F0,$00,$03,$00,$05,$00,$00
        EQUS $00,$00,$06,$0E,$24,$0E,$04,$0E
        EQUS $04,$06,$03,$03,$07,$0F,$0F,$03
        EQUS $09,$0C,$00,$02,$03,$0B,$0B,$00
        EQUS $00,$02,$00,$00,$01,$01,$01,$0C
        EQUS $0C,$00,$03,$03,$03,$03,$02,$02
        EQUS $08,$00,$09,$03,$03,$03,$01,$01
        EQUS $0C,$0C,$02,$02,$02,$02,$02,$02
        EQUS $02,$08,$00,$03,$00,$05,$00,$00
        EQUS $00,$00,$03,$0F,$25,$0F,$05,$0F
        EQUS $01,$03,$03,$03,$07,$0F,$0F,$03
        EQUS $03,$09,$00,$02,$03,$0B,$0B,$00
        EQUS $00,$02,$00,$0C,$00,$01,$01,$01
        EQUS $0C,$0C,$06,$0C,$03,$03,$02,$02
        EQUS $02,$08,$0C,$09,$03,$03,$03,$03
        EQUS $00,$00,$02,$02,$02,$00,$06,$06
        EQUS $04,$04,$00,$01,$03,$07,$07,$00
        EQUS $00,$01,$03,$03,$0B,$0F,$0F,$03
        EQUS $06,$0C,$09,$0D,$18,$0D,$08,$0D
        EQUS $08,$09,$00,$03,$00,$0A,$00,$00
        EQUS $00,$00,$01,$01,$01,$01,$01,$01
        EQUS $01,$04,$06,$03,$03,$03,$02,$02
        EQUS $0C,$0C,$03,$03,$03,$03,$01,$01
        EQUS $04,$00,$00,$00,$02,$02,$02,$0C
        EQUS $0C,$00,$00,$01,$03,$07,$07,$00
        EQUS $00,$01,$03,$03,$0B,$0F,$0F,$03
        EQUS $03,$06,$03,$0F,$1A,$0F,$0A,$0F
        EQUS $02,$03,$00,$03,$00,$0A,$00,$00
        EQUS $00,$00,$01,$01,$01,$00,$09,$09
        EQUS $08,$08,$0C,$06,$03,$03,$03,$03
        EQUS $00,$00,$09,$0C,$03,$03,$01,$01
        EQUS $01,$04,$00,$0C,$00,$02,$02,$02
        EQUS $0C,$0C,$00,$00,$01,$01,$00,$04
        EQUS $09,$03,$01,$03,$03,$03,$03,$05
        EQUS $03,$03,$02,$03,$03,$03,$03,$0A
        EQUS $03,$03,$04,$04,$06,$06,$04,$0C
        EQUS $06,$03,$03,$03,$03,$01,$01,$01
        EQUS $01,$04,$03,$03,$03,$02,$02,$02
        EQUS $02,$08,$03,$03,$03,$04,$00,$00
        EQUS $00,$00,$03,$03,$03,$08,$00,$00
        EQUS $00,$00,$08,$08,$09,$09,$08,$0C
        EQUS $09,$03,$01,$03,$03,$03,$03,$05
        EQUS $03,$03,$02,$03,$03,$03,$03,$0A
        EQUS $03,$03,$00,$00,$02,$02,$00,$08
        EQUS $06,$03,$03,$03,$03,$04,$00,$00
        EQUS $00,$00,$03,$03,$03,$08,$00,$00
        EQUS $00,$00,$03,$03,$03,$01,$01,$01
        EQUS $01,$04,$03,$03,$03,$02,$02,$02
        EQUS $02,$08,$00,$03,$00,$05,$00,$00
        EQUS $00,$00,$06,$0E,$24,$0E,$04,$0E
        EQUS $04,$06,$03,$03,$07,$0F,$0F,$03
        EQUS $09,$0C,$00,$02,$03,$0B,$0B,$00
        EQUS $00,$02,$00,$08,$08,$09,$09,$00
        EQUS $00,$00,$03,$03,$03,$03,$02,$00
        EQUS $00,$00,$09,$03,$03,$03,$01,$00
        EQUS $00,$00,$02,$02,$00,$06,$06,$04
        EQUS $04,$00,$00,$01,$03,$07,$07,$00
        EQUS $00,$01,$03,$03,$0B,$0F,$0F,$03
        EQUS $06,$0C,$09,$0D,$18,$0D,$08,$0D
        EQUS $08,$09,$00,$03,$00,$0A,$00,$00
        EQUS $00,$00,$01,$01,$00,$09,$09,$08
        EQUS $08,$00,$06,$03,$03,$03,$02,$00
        EQUS $00,$00,$03,$03,$03,$03,$01,$00
        EQUS $00,$00,$00,$04,$04,$03,$06,$00
        EQUS $00,$00,$05,$07,$0B,$03,$0B,$05
        EQUS $05,$01,$00,$05,$02,$0A,$07,$03
        EQUS $03,$07,$01,$05,$00,$00,$01,$0B
        EQUS $03,$03,$00,$01,$05,$0B,$07,$07
        EQUS $03,$0A,$0B,$07,$0B,$03,$05,$05
        EQUS $0B,$0B,$07,$03,$07,$0B,$03,$03
        EQUS $07,$0B,$03,$07,$03,$0B,$0B,$07
        EQUS $07,$07,$00,$00,$00,$0A,$02,$03
        EQUS $07,$07,$F3,$F3,$FF,$F3,$F3,$F7
        EQUS $FB,$FB,$F3,$F3,$FF,$F3,$F3,$F3
        EQUS $FB,$FB,$F3,$F3,$FF,$F3,$F3,$FB
        EQUS $FB,$FB,$F3,$F3,$FF,$F3,$F3,$FB
        EQUS $FB,$FB,$FB,$FB,$F7,$F3,$F3,$FF
        EQUS $F3,$F3,$FB,$FB,$F3,$F3,$F3,$FF
        EQUS $F3,$F3,$FB,$FB,$FB,$F3,$F3,$FF
        EQUS $F3,$F3,$FB,$FB,$FF,$F3,$F3,$FF
        EQUS $F3,$F3,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$0F,$00
        EQUS $00,$00,$00,$04,$04,$04,$0E,$04
        EQUS $04,$04,$00,$08,$08,$08,$0D,$08
        EQUS $08,$08,$00,$04,$04,$04,$0E,$04
        EQUS $04,$04,$00,$08,$08,$08,$0D,$08
        EQUS $08,$08,$00,$00,$00,$00,$0F,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$04,$04,$04,$00,$00
        EQUS $00,$00,$05,$0C,$0C,$0C,$05,$05
        EQUS $05,$05,$00,$0C,$0C,$0C,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$0C,$0C,$0C,$00,$00
        EQUS $00,$00,$0A,$0C,$0C,$0C,$0A,$0A
        EQUS $0A,$0A,$00,$08,$08,$08,$00,$00
        EQUS $00,$00,$00,$03,$00,$05,$00,$00
        EQUS $00,$08,$03,$0F,$25,$0F,$05,$0F
        EQUS $00,$04,$03,$03,$07,$0F,$0F,$03
        EQUS $09,$09,$00,$02,$03,$0B,$0B,$00
        EQUS $02,$03,$08,$0C,$0C,$00,$00,$00
        EQUS $00,$00,$0C,$09,$03,$00,$00,$00
        EQUS $00,$00,$03,$02,$00,$00,$00,$04
        EQUS $04,$00,$03,$03,$03,$03,$03,$0C
        EQUS $0C,$00,$03,$03,$03,$03,$03,$00
        EQUS $00,$00,$03,$01,$03,$01,$03,$00
        EQUS $00,$00,$01,$01,$01,$01,$01,$00
        EQUS $00,$00,$03,$02,$02,$02,$03,$00
        EQUS $00,$00,$02,$02,$02,$02,$02,$00
        EQUS $00,$00,$03,$03,$03,$03,$03,$00
        EQUS $00,$00,$00,$02,$01,$00,$00,$00
        EQUS $00,$00,$02,$02,$02,$02,$02,$00
        EQUS $00,$00,$03,$03,$03,$03,$03,$00
        EQUS $00,$00,$01,$01,$01,$01,$03,$00
        EQUS $00,$00,$01,$01,$01,$00,$01,$00
        EQUS $00,$00,$03,$02,$03,$00,$03,$00
        EQUS $00,$00,$02,$00,$02,$02,$02,$00
        EQUS $00,$00,$0F,$00,$00,$00,$00,$00
        EQUS $00,$00,$0F,$00,$00,$00,$00,$00
        EQUS $00,$00,$0A,$05,$05,$05,$05,$05
        EQUS $05,$05,$00,$00,$01,$01,$03,$03
        EQUS $03,$03,$0C,$0C,$0C,$0C,$0C,$0C
        EQUS $0C,$0C,$03,$03,$03,$03,$03,$03
        EQUS $03,$03,$00,$00,$08,$08,$0C,$0C
        EQUS $0C,$0C,$03,$03,$03,$03,$01,$01
        EQUS $00,$00,$0C,$0C,$0C,$0C,$0C,$0C
        EQUS $0C,$0C,$03,$03,$03,$03,$03,$03
        EQUS $03,$03,$0C,$0C,$0C,$0C,$08,$08
        EQUS $00,$00,$00,$01,$04,$06,$0C,$03
        EQUS $06,$0C,$01,$09,$09,$09,$09,$03
        EQUS $0C,$0C,$02,$0C,$0C,$0C,$0C,$0C
        EQUS $03,$06

.L1118
        EQUS $00,$02,$08,$09,$0C,$09,$03,$0C
        EQUS $06,$04,$01,$00,$00,$04,$01,$0C
        EQUS $0C,$0C,$0C,$01,$06,$0C,$0C,$06
        EQUS $06,$06,$06,$02,$09,$0C,$0C,$0C
        EQUS $09,$08,$02,$00,$00,$08,$02,$06
        EQUS $06,$0C,$0C,$06,$09,$01,$04,$00
        EQUS $06,$09,$06,$06,$0C,$0C,$0C,$06
        EQUS $09,$09,$06,$09,$09,$0C,$0C,$09
        EQUS $09,$0C,$0C,$09,$0C,$02,$08,$00
        EQUS $00,$00,$05,$0F,$03,$03,$03,$01
        EQUS $0F,$0F,$0F,$0F,$03,$03,$03,$03
        EQUS $0A,$0F,$0F,$0F,$03,$03,$03,$03
        EQUS $00,$0A,$0A,$0F,$03,$03,$03,$02
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$01,$01,$01
        EQUS $00,$00,$03,$03,$03,$03,$33,$33
        EQUS $00,$03,$03,$2A,$03,$33,$12,$32
        EQUS $03,$03,$03,$03,$03,$20,$30,$30
        EQUS $03,$03,$03,$03,$00,$10,$30,$30
        EQUS $00,$03,$03,$2A,$00,$30,$20,$30
        EQUS $00,$00,$02,$00,$00,$00,$20,$30
        EQUS $00,$03,$03,$03,$03,$21,$31,$31
        EQUS $03,$03,$03,$03,$17,$03,$03,$23
        EQUS $00,$02,$03,$03,$8B,$03,$33,$13
        EQUS $00,$00,$02,$03,$13,$33,$33,$33
        EQUS $00,$00,$00,$00,$00,$22,$33,$33
        EQUS $00,$00,$00,$00,$00,$01,$03,$03
        EQUS $00,$00,$01,$03,$03,$03,$03,$03
        EQUS $00,$03,$03,$03,$03,$03,$03,$03
        EQUS $00,$03,$03,$03,$03,$03,$03,$03
        EQUS $13,$03,$03,$03,$13,$23,$23,$23
        EQUS $33,$33,$03,$03,$02,$02,$02,$02
        EQUS $21,$12,$30,$00,$00,$00,$00,$00
        EQUS $03,$30,$30,$30,$00,$00,$00,$00
        EQUS $03,$30,$30,$20,$10,$20,$20,$20
        EQUS $12,$31,$10,$00,$00,$00,$00,$00
        EQUS $00,$30,$00,$00,$00,$00,$00,$00
        EQUS $30,$20,$10,$10,$20,$10,$10,$00
        EQUS $33,$30,$10,$00,$30,$30,$30,$30
        EQUS $33,$30,$21,$30,$03,$03,$03,$03
        EQUS $33,$00,$31,$30,$03,$03,$03,$03
        EQUS $33,$00,$33,$22,$00,$02,$03,$03
        EQUS $03,$03,$03,$03,$03,$01,$00,$00
        EQUS $03,$03,$03,$03,$03,$03,$00,$00
        EQUS $03,$03,$03,$03,$03,$03,$03,$10
        EQUS $13,$22,$13,$03,$02,$00,$00,$30
        EQUS $33,$03,$02,$20,$10,$10,$10,$20
        EQUS $00,$30,$00,$10,$30,$30,$30,$30
        EQUS $00,$30,$00,$30,$30,$30,$30,$30
        EQUS $20,$00,$00,$00,$20,$20,$20,$00
        EQUS $10,$00,$00,$20,$30,$30,$30,$20
        EQUS $00,$30,$00,$30,$30,$30,$30,$30
        EQUS $00,$30,$10,$20,$30,$30,$30,$30
        EQUS $20,$30,$30,$31,$23,$23,$23,$13
        EQUS $01,$33,$23,$03,$03,$03,$03,$33
        EQUS $03,$03,$03,$03,$03,$03,$03,$22
        EQUS $03,$03,$03,$03,$03,$03,$00,$00
        EQUS $03,$03,$03,$03,$03,$02,$00,$00
        EQUS $00,$00,$00,$11,$11,$11,$00,$11
        EQUS $00,$00,$00,$02,$03,$23,$00,$22
        EQUS $00,$00,$00,$00,$00,$01,$00,$00
        EQUS $00,$00,$00,$00,$03,$13,$11,$11
        EQUS $00,$00,$00,$03,$02,$33,$33,$33
        EQUS $10,$00,$10,$33,$00,$00,$00,$00
        EQUS $30,$10,$30,$03,$00,$00,$00,$00
        EQUS $10,$30,$21,$03,$03,$00,$00,$00
        EQUS $20,$20,$02,$02,$03,$00,$00,$00
        EQUS $30,$00,$00,$00,$13,$33,$33,$13
        EQUS $20,$00,$00,$33,$33,$33,$33,$33
        EQUS $01,$01,$30,$33,$23,$00,$00,$10
        EQUS $03,$03,$03,$03,$03,$23,$11,$11
        EQUS $03,$03,$03,$03,$03,$13,$33,$33
        EQUS $00,$02,$03,$02,$00,$00,$33,$33
        EQUS $00,$00,$00,$00,$00,$00,$00,$22
        EQUS $00,$10,$20,$30,$10,$20,$20,$00
        EQUS $30,$10,$20,$00,$00,$00,$00,$00
        EQUS $30,$20,$10,$00,$00,$00,$00,$00
        EQUS $00,$20,$10,$30,$30,$10,$00,$10
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $20,$10,$10,$20,$20,$20,$20,$10
        EQUS $00,$00,$00,$20,$10,$30,$30,$30
        EQUS $00,$00,$10,$00,$00,$00,$20,$21
        EQUS $10,$30,$30,$21,$03,$03,$03,$03
        EQUS $20,$20,$03,$03,$03,$03,$03,$03
        EQUS $00,$00,$00,$00,$00,$02,$02,$03
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $10,$00,$00,$01,$00,$00,$00,$00
        EQUS $30,$00,$00,$00,$10,$30,$10,$20
        EQUS $01,$01,$00,$30,$30,$10,$00,$00
        EQUS $01,$03,$33,$33,$20,$30,$20,$10
        EQUS $03,$03,$03,$03,$01,$00,$00,$00
        EQUS $03,$03,$03,$03,$13,$33,$33,$11
        EQUS $02,$03,$13,$33,$33,$33,$33,$33
        EQUS $00,$00,$33,$33,$22,$33,$33,$22
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$10,$10
        EQUS $00,$00,$00,$00,$00,$00,$20,$20
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$30
        EQUS $00,$00,$00,$00,$00,$12,$20,$00
        EQUS $00,$00,$10,$10,$20,$00,$00,$00
        EQUS $20,$20,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$20,$20,$20,$20,$30
        EQUS $00,$00,$00,$00,$00,$10,$30,$30
        EQUS $00,$00,$10,$10,$30,$30,$21,$21
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $20,$20,$00,$20,$13,$33,$33,$11
        EQUS $00,$00,$00,$00,$33,$33,$33,$33
        EQUS $00,$10,$00,$33,$22,$33,$33,$22
        EQUS $10,$20,$11,$00,$00,$00,$00,$00
        EQUS $10,$00,$00,$01,$00,$00,$00,$00
        EQUS $30,$00,$00,$00,$10,$30,$10,$20
        EQUS $01,$01,$00,$30,$30,$10,$00,$00
        EQUS $02,$02,$33,$33,$20,$30,$20,$33
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$01,$01,$01
        EQUS $00,$00,$03,$03,$03,$03,$33,$33
        EQUS $00,$03,$03,$2A,$03,$33,$13,$33
        EQUS $03,$03,$03,$03,$03,$23,$33,$33
        EQUS $03,$03,$03,$03,$03,$13,$33,$33
        EQUS $00,$03,$03,$2A,$03,$33,$23,$33
        EQUS $00,$00,$03,$03,$03,$03,$33,$33
        EQUS $00,$00,$00,$00,$00,$02,$02,$02
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$01,$03,$03
        EQUS $00,$00,$01,$03,$03,$03,$03,$03
        EQUS $00,$03,$03,$03,$03,$03,$03,$03
        EQUS $00,$03,$03,$03,$03,$03,$03,$03
        EQUS $13,$03,$03,$03,$13,$23,$23,$23
        EQUS $33,$33,$03,$03,$03,$03,$03,$03
        EQUS $33,$02,$33,$03,$03,$03,$03,$03
        EQUS $00,$33,$33,$33,$03,$03,$03,$03
        EQUS $00,$33,$33,$33,$03,$03,$03,$03
        EQUS $11,$22,$33,$03,$03,$03,$03,$03
        EQUS $33,$33,$03,$03,$03,$03,$03,$03
        EQUS $23,$03,$03,$03,$23,$13,$13,$13
        EQUS $00,$03,$03,$03,$03,$03,$03,$03
        EQUS $00,$03,$03,$03,$03,$03,$03,$03
        EQUS $00,$00,$02,$03,$03,$03,$03,$03
        EQUS $00,$00,$00,$00,$00,$02,$03,$03
        EQUS $03,$03,$03,$03,$03,$01,$00,$00
        EQUS $03,$03,$03,$03,$03,$03,$00,$00
        EQUS $03,$03,$03,$03,$03,$03,$03,$11
        EQUS $13,$22,$13,$03,$03,$03,$03,$33
        EQUS $33,$03,$03,$23,$13,$13,$13,$23
        EQUS $03,$33,$03,$13,$33,$33,$33,$33
        EQUS $03,$33,$03,$33,$33,$33,$33,$33
        EQUS $23,$03,$03,$03,$23,$23,$23,$03
        EQUS $13,$03,$03,$03,$13,$13,$13,$03
        EQUS $03,$33,$03,$33,$33,$33,$33,$33
        EQUS $03,$33,$03,$23,$33,$33,$33,$33
        EQUS $33,$03,$03,$13,$23,$23,$23,$13
        EQUS $23,$11,$23,$03,$03,$03,$03,$33
        EQUS $03,$03,$03,$03,$03,$03,$03,$22
        EQUS $03,$03,$03,$03,$03,$03,$00,$00
        EQUS $03,$03,$03,$03,$03,$02,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$11
        EQUS $00,$01,$03,$01,$00,$00,$33,$33
        EQUS $03,$03,$03,$03,$03,$23,$33,$33
        EQUS $03,$03,$03,$03,$03,$13,$33,$33
        EQUS $03,$03,$03,$00,$02,$33,$33,$33
        EQUS $13,$03,$03,$00,$00,$00,$00,$00
        EQUS $33,$03,$03,$03,$00,$00,$00,$00
        EQUS $03,$03,$03,$03,$03,$00,$00,$00
        EQUS $03,$03,$03,$03,$03,$00,$00,$00
        EQUS $33,$03,$03,$03,$00,$00,$00,$00
        EQUS $23,$03,$03,$00,$00,$00,$00,$00
        EQUS $03,$03,$03,$00,$01,$33,$33,$33
        EQUS $03,$03,$03,$03,$03,$23,$33,$33
        EQUS $03,$03,$03,$03,$03,$13,$33,$33
        EQUS $00,$02,$03,$02,$00,$00,$33,$33
        EQUS $00,$00,$00,$00,$00,$00,$00,$22

.L1700
        EQUS $FF

.L1701
        EQUS $FC,$FF,$E0,$00,$19,$E1,$E0,$02
        EQUS $27,$84,$02,$4B,$18,$03,$4F,$4A
        EQUS $02,$6F,$84,$03,$73,$56,$02,$93
        EQUS $18,$02,$B7,$84,$02,$D7,$4A,$06
        EQUS $F7,$36,$06,$F7,$2A,$01,$BC,$3C
        EQUS $01,$A9,$3C,$01,$9B,$78,$01,$83
        EQUS $78,$01,$2E,$32,$01,$18,$32,$01
        EQUS $76,$30,$01,$60,$30,$05,$BE,$54
        EQUS $0C,$7D,$00,$0C,$35,$00,$0C,$95
        EQUS $0B,$0C,$4D,$0B,$08,$09,$3B,$02
        EQUS $DA,$3C,$05,$08,$00,$07,$BF,$00
        EQUS $00,$09,$1F,$00,$10,$1F,$3D,$4C
        EQUS $02,$0A,$1F,$30,$30,$30,$38,$03
        EQUS $0F,$1F

        EQUS ":erocS"

        EQUS $00,$02,$1F,$00,$00,$00,$28,$01
        EQUS $19,$00,$44,$00,$00,$01,$19,$00
        EQUS $00,$FE,$D0,$01,$19,$FF,$D8,$00
        EQUS $00,$01,$19,$03,$9C,$04,$DC,$04
        EQUS $19,$0C,$03,$12,$0C

.L1796  ; Logical colours
        EQUS $03,$08,$02,$09,$01,$0A,$06,$0B
        EQUS $03,$0C,$02,$0D,$01,$0E,$04,$0F
        EQUS $00,$00,$00,$00,$00,$00,$20,$0A
        EQUS $00,$17,$02,$16,$13,$36,$04,$14

        EQUS $BF,$00,$09,$8C,$00,$09,$8C,$5F
        EQUS $01,$61,$83,$02,$61,$00,$05,$61
        EQUS $2F,$0C,$0B,$02,$02,$DA,$3C,$06
        EQUS $F7,$2A,$06,$F7,$36,$02,$D7,$58
        EQUS $02,$A4,$92,$05,$BC,$06,$04,$89
        EQUS $8A,$04,$89,$62,$04,$89,$3C,$04
        EQUS $89,$12,$04,$5E,$6E,$04,$5E,$30
        EQUS $04,$33,$8A,$04,$33,$62,$04,$33
        EQUS $3C,$04,$33,$12,$03,$79,$47,$08
        EQUS $08,$08,$0A,$E5,$E5,$E5,$8C,$48
        EQUS $8C,$5A,$36,$00,$36,$98,$06,$F7
        EQUS $2A,$06,$F7,$36,$02,$D7,$54,$06
        EQUS $83,$0C

.L1818
        EQUS $05,$48,$06,$08,$83,$2C,$08,$83
        EQUS $36,$03,$8D,$5C,$03,$BC,$70,$03
        EQUS $7B,$80,$04,$A6,$92,$03,$50,$92
        EQUS $5B,$80,$A9,$92,$A3,$80,$9C,$6E
        EQUS $64,$6E,$6D,$5C,$10,$18,$10,$46
        EQUS $20,$6C,$28,$7D,$53,$92,$B7,$18
        EQUS $B7,$46,$86,$29,$18,$00,$4B,$00
        EQUS $86,$00,$30,$8E,$90,$58,$18,$57
        EQUS $3B,$2D,$14,$08,$00,$0F,$BF,$00
        EQUS $04,$DA,$3C,$04,$7E,$80,$10,$1E
        EQUS $10,$4C,$02,$7D,$00,$00,$01,$19
        EQUS $03,$2B,$08,$03,$2B,$4C,$03,$2B
        EQUS $90,$04,$56,$10,$04,$56,$38,$04
        EQUS $56,$60,$04,$56,$88,$04,$81,$18
        EQUS $04,$81,$4C,$04,$81,$80,$04,$AC
        EQUS $20,$04,$AC,$38,$04,$AC,$60,$04
        EQUS $AC,$78,$2E,$28,$2E,$70,$59,$28
        EQUS $59,$70,$84,$28,$84,$70,$AF,$28
        EQUS $AF,$70,$B0,$38,$B0,$67,$14,$0B
        EQUS $00,$12,$2E,$08,$10,$59,$10,$0E
        EQUS $84,$18,$0C,$AF,$20,$08,$DA,$30
        EQUS $00,$8C,$00,$00,$01,$19,$8A,$29

;-------------------------------------------------------------------------
; CalcXYAddress
;-------------------------------------------------------------------------
; XOrd = 0-79, YOrd = 0-255
;-------------------------------------------------------------------------
; On entry  : 
; On exit   : 
;-------------------------------------------------------------------------
.CalcXYAddress
        LDA #$00
        STA L0071
        STA L0072
        TXA
        AND #$FE
        ASL A
        ROL L0071
        ASL A
        ROL L0071
        STA L0070
        TYA
        AND #$07
        PHA
        TYA
        AND #$F8
        LSR A
        LSR A
        STA L0073
        LSR A
        LSR A
        ROR L0072
        ADC L0073
        STA L0073
        PLA
        ADC L0072
        ADC L0070
        STA L0072
        LDA #$30
        ADC L0073
        ADC L0071
        STA L0073
        RTS

;-------------------------------------------------------------------------
; PlotSpriteEOR16
;-------------------------------------------------------------------------
; On entry  :
; On exit   : 
;-------------------------------------------------------------------------
.PlotSpriteEOR16

        LDA #$0F                ; 16 wide sprite

.PlotSpriteEOR
        PHA
        JSR CalcXYAddress

        PLA
        TAX                     ; X contains width?
.L1904
        LDY L006F               ; Y contains height?
.L1906
        LDA (L0074),Y
        EOR (L0072),Y
        STA (L0072),Y
        TYA
        SEC
        SBC #$08
        TAY
        BCS L1906

        DEX
        BMI L1942

        INC L0074
        LDY L0074
        TYA
        AND #$07
        BNE L192A

        DEY
        TYA
        SEC
        ADC L006F
        STA L0074
        BCC L192A

        INC L0075
.L192A
        INC L0072
        LDY L0072
        TYA
        AND #$07
        BNE L1904

        DEY
        TYA
        CLC
        ADC #$79
        STA L0072
        LDA L0073
        ADC #$02
        STA L0073
        BCC L1904

.L1942
        RTS
;-------------------------------------------------------------------------

.L1943
        LDX #$17
        LDA #$00
.L1947
        STA L004F,X
        DEX
        BNE L1947

        INX
        STX L0056
        LDA #$17
        STA L0059
        LDA #$03
        STA L005A
        LDA #$A6
        LDY #$0B
        JSR PutText

;-------------------------------------------------------------------------
; Define logical colour
        LDY #$0F
.L1960
        LDA #$13
        JSR OSWRCH          ; Define logical colour
        LDA L1796,Y
        JSR OSWRCH
        DEY
        LDA L1796,Y
        JSR OSWRCH
        JSR OSWRCH
        JSR OSWRCH
        JSR OSWRCH
        DEY
        BPL L1960
        RTS
;-------------------------------------------------------------------------

.L197F
        LDA #$17
        STA L0059
        JSR L1A77

        LDA #$05
        JSR OSWRCH          ; Write text at graphics cursor

        LDX L005B
        BNE L1994

        JSR L19B3

        BNE L19A7

.L1994
        DEX
        BNE L199C

        JSR L1B39

        BNE L19A7

.L199C
        DEX
        BNE L19A4

        JSR L1BC8

        BNE L19A7

.L19A4
        JSR L1C3B

.L19A7
        JSR L1AEB

        LDA #$17
        STA L0059
        LDA #$04
        JMP OSWRCH          ; Write text at text cursor

.L19B3
        LDA #$00
        STA L1700
        STA L1701
        LDX #$50
        STX L0080
        LDA #$08
        STA L0082
        LDA #$0F
        JSR L1B15

.L19C8
        LDA #$03
        STA L0081
.L19CC
        JSR L1A44

        DEC L0081
        BNE L19CC

        LDA L1701
        BNE L19DF

        LDA #$04
        STA L1701
        BNE L19C8

.L19DF
        BMI L19ED

        LDA #$FF
        STA L1700
        LDA #$FC
        STA L1701
        BNE L19C8

.L19ED
        LDA #$12
.L19EF
        STA L0081
        LDA #$0B
        JSR L1B15

.L19F6
        JSR L1A5C

        DEC L0081
        BNE L19F6

        LDA #$0C
        LDY #$2F
        RTS

.L1A02
        LDA L0082
        STA L0058
.L1A06
        LDY L0080
.L1A08
        LDA #$19
        JSR OSWRCH          ; Plot x,y

        LDA #$04
        JSR OSWRCH          ; Write text at text cursor

        LDX #$00
        STX L0057
        LDA (L0058),Y
        ASL A
        ROL L0057
.L1A1B
        ASL A
        ROL L0057
        ASL A
        ROL L0057
        JSR OSWRCH

        LDA L0057
        JSR OSWRCH

        DEY
        STX L0057
        LDA (L0058),Y
        ASL A
        ROL L0057
        ASL A
        ROL L0057
        JSR OSWRCH

        LDA L0057
        JSR OSWRCH

        DEY
        LDA (L0058),Y
        DEY
        STY L0080
        TAX
        RTS

.L1A44
        JSR L1A02

.L1A47
        LDY #$07
        LDA #$00
        JSR PutText

.L1A4E
        DEX
        BNE L1A47

        LDA L1701
        BEQ L1A5B

        LDA #$E1
        JMP OSWRCH

.L1A5B
        RTS

.L1A5C
        JSR L1A02

        LDA #$E2
        JSR OSWRCH

.L1A64
        LDA #$08
        JSR OSWRCH

        LDA #$0A
        JSR OSWRCH          ; Backspace cursor one character

        LDA #$E3
        JSR OSWRCH

        DEX
        BNE L1A64

        RTS

.L1A77
        LDY #$36
        LDA #$5F
        JSR PutText

        LDA L0056
        JSR BCDtoScreen

        LDY #$02
        LDA #$5C
        JSR PutText

        LDX L005A
        DEX
        BEQ L1A9C

        LDA #$E4
        JSR OSWRCH

        DEX
        BEQ L1A9C

        LDA #$E4
        JSR OSWRCH

.L1A9C
        LDA #$00
        LDY #$0B
        JSR L1AE7

.L1AA3
        LDY #$02
        LDA #$59
        JSR PutText

        LDX #$02
.L1AAC
        LDA L0050,X
        JSR BCDtoScreen

        DEX
        BPL L1AAC

        RTS

-------------------------------------------------------------------------
; BCDtoScreen
;-------------------------------------------------------------------------
; On entry  : A contains value
; On exit   : A is underfined
;           : X and Y are preserved
;-------------------------------------------------------------------------
.BCDtoScreen
        PHA
        LSR A
        LSR A
        LSR A
        LSR A
        CLC
        ADC #$30
        JSR OSWRCH

        PLA
        AND #$0F
        CLC
        ADC #$30
        JMP OSWRCH
;-------------------------------------------------------------------------

.L1AC9
        LDA L0053
        BNE L1ACE

        RTS

.L1ACE
        SED
        SEC
        SBC #$01
        BNE L1AD8

        LDX #$FF
        STX L008B
.L1AD8
        STA L0053
        CLD
        LDY #$02
        LDA #$68
        JSR PutText

        LDA L0053
        JMP BCDtoScreen

.L1AE7
        LDX #$0A
        STX L0055
.L1AEB
        STA L0054
.L1AED
        LDX #$03
.L1AEF
        LDA (L0054),Y
        STA L0072,X
        DEY
        DEX
        BPL L1AEF

        LDA (L0054),Y
        STA L006F
        DEY
        LDA (L0054),Y
        STY L0057
        TAX
        JSR L1904

        LDY L0057
        DEY
        BPL L1AED

        RTS

;-------------------------------------------------------------------------
; PutTextOffset
;-------------------------------------------------------------------------
; NB data is stored backwards, so prints back to front
;-------------------------------------------------------------------------
; On entry  : A contains text address
;           : Y contains offset into text
; On exit   : 
;-------------------------------------------------------------------------
.PutText
        STA L0058
.L1B0C
        LDA (L0058),Y
        JSR OSWRCH

        DEY
        BPL L1B0C

        RTS
;-------------------------------------------------------------------------

.L1B15
        PHA
        LDA #$12
        JSR OSWRCH          ; Define graphics colour

        LDA #$00
        JSR OSWRCH          ; Does nothing ?

        PLA
        JMP OSWRCH

.L1B24
        SED
        CLC
        ADC L0050
        STA L0050
        TYA
        ADC L0051
        STA L0051
        LDA #$00
        ADC L0052
        STA L0052
        CLD
        JMP L1AA3

.L1B39
        LDA #$0F
        JSR L1B15

        LDX #$0B
        STX L0080
        LDA #$B2
        STA L0058
        LDA #$04
        STA L0081
.L1B4A
        JSR L1A06

        LDA #$E6
.L1B4F
        JSR OSWRCH

        DEX
        BNE L1B4F

        DEC L0081
        BNE L1B4A

        LDX #$0E
        STX L0080
        LDA #$05
        STA L0081
        LDA #$00
        STA L1700
        STA L1701
        LDA #$BE
        STA L0082
.L1B6D
        JSR L1A02

.L1B70
        LDY #$07
        LDA #$00
        JSR PutText

        DEX
        BPL L1B70

        DEC L0081
        BNE L1B6D

        LDA #$E0
        JSR OSWRCH

        LDA #$CD
        STA L0082
        LDX #$2C
        STX L0080
        LDA #$0F
        JSR L19EF

        LDA #$07
        JSR L1B15

        LDA #$FA
        STA L0058
        LDY #$02
        JSR L1A08

.L1B9E
        LDA #$FD
        LDY #$06
        JSR PutText

        DEX
        BNE L1B9E

        LDA #$0C
        JSR L1B15

        LDA #$04
        STA L0081
        LDY #$0E
        STY L0080
.L1BB5
        JSR L1A06

        LDA #$E7
        JSR OSWRCH

        INC L0080
        DEC L0081
        BNE L1BB5

        LDA #$3C
        LDY #$29
        RTS

.L1BC8
        LDA #$18
        STA L0059
        LDA #$0C
        STA L0082
        LDA #$0B
        JSR L1B15

        LDY #$5D
        STY L0080
        LDA #$02
        STA L0081
.L1BDD
        JSR L1A02

        INC L0080
        LDA #$6A
        LDY #$05
        JSR PutText

        DEC L0081
        BNE L1BDD

        LDA #$0C
        STA L0058
        LDA #$0F
        JSR L1B15

        LDA #$04
        STA L0081
.L1BFA
        JSR L1A06

        LDA #$E0
.L1BFF
        JSR OSWRCH

        DEX
        BNE L1BFF

        DEC L0081
        BNE L1BFA

        LDA #$15
        STA L0081
.L1C0D
        JSR L1A06

        LDA #$E0
        JSR OSWRCH

        LDX L0081
        CPX #$0E
.L1C19
        BCC L1C22

L1C1A = L1C19+1
.L1C1B
        JSR OSWRCH

.L1C1E
        CPX #$13
        BCS L1C27

.L1C22
        LDA #$E1
        JSR OSWRCH

.L1C27
        INC L0080
        DEC L0081
        BNE L1C0D

        LDA L0058
        STA L0082
        LDA #$0C
        JSR L19EF

        LDA #$66
        LDY #$17
        RTS

.L1C3B
        LDA #$0F
        JSR L1B15

        LDA #$06
        STA L0081
        LDA #$18
        STA L0059
        LDA #$70
        STA L0058
        STA L0082
        LDY #$4F
        STY L0080
.L1C52
        JSR L1A06

        LDA #$E0
.L1C57
        JSR OSWRCH

        DEX
        BNE L1C57

        DEC L0081
        BNE L1C52

        LDA #$02
        STA L0081
.L1C65
        JSR L1A02

        LDA #$C0
        LDY #$05
        JSR PutText

        INC L0080
        DEC L0081
        BNE L1C65

        LDA #$0C
        JSR L1B15

        LDA #$08
        STA L0081
.L1C7E
        JSR L1A02

        LDA #$E0
        JSR OSWRCH

        INC L0080
        DEC L0081
        BNE L1C7E

        LDA #$0E
        JSR L19EF

        LDA #$7E
        LDY #$1D
        RTS

        ; DATA 1C96?
        EQUS $A0
        EQUS $4F,$84,$80,$20,$4E,$1A,$A9,$E0
        EQUS $20,$00,$00,$00,$00,$01,$01,$04
        EQUS $04,$04,$04,$0C,$03,$03,$03,$0C
        EQUS $0C,$0C,$0C,$0C,$03,$03,$03,$0C
        EQUS $0C,$0C,$0C,$0C,$03,$03,$03,$0C
        EQUS $0C,$08,$08,$0C,$03,$03,$03,$0C
        EQUS $0C,$00,$00,$00,$00,$02,$02,$08
        EQUS $08,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$0C,$03,$01,$01,$01,$01,$03
        EQUS $0C,$0C,$03,$03,$03,$03,$03,$03
        EQUS $0C,$0C,$03,$03,$03,$03,$03,$03
        EQUS $0C,$0C,$03,$02,$02,$02,$02,$03
        EQUS $0C,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$04,$04,$01,$01,$00,$00,$00
        EQUS $00,$0C,$0C,$03,$03,$03,$0C,$04
        EQUS $04,$0C,$0C,$03,$03,$03,$0C,$0C
        EQUS $0C,$0C,$0C,$03,$03,$03,$0C,$0C
        EQUS $0C,$0C,$0C,$03,$03,$03,$0C,$08
        EQUS $08,$08,$08,$02,$02,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$05
        EQUS $0F,$00,$00,$0F,$0F,$03,$03,$0F
        EQUS $0A,$00,$0F,$0F,$0B,$03,$03,$0F
        EQUS $0F,$00,$01,$03,$02,$00,$02,$0F
        EQUS $0F,$00,$00,$05,$05,$00,$00,$00
        EQUS $00,$01,$03,$02,$00,$03,$03,$03
        EQUS $03,$03,$03,$00,$00,$0B,$0B,$03
        EQUS $03,$00,$02,$07,$05,$02,$02,$02
        EQUS $02,$FF,$FF,$FF,$AA,$AA,$FF,$FF
        EQUS $FF,$FF,$FF,$00,$00,$00,$00,$FF
        EQUS $FF,$FF,$FF,$FF,$55,$55,$FF,$FF
        EQUS $FF,$75,$75,$75,$20,$20,$75,$75
        EQUS $75,$FF,$FF,$00,$00,$00,$00,$FF
        EQUS $FF,$FF,$FF,$FF,$55,$55,$FF,$FF
        EQUS $FF,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$04,$0C,$0C,$0C,$0C
        EQUS $04,$04,$0C,$0C,$0C,$0C,$0C,$0C
        EQUS $04,$08,$0C,$0C,$0C,$0C,$0C,$0C
        EQUS $04,$00,$00,$08,$0C,$0C,$0C,$0C
        EQUS $04,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$10,$10,$10,$10,$10,$10,$10
        EQUS $00,$00,$00,$00,$00,$00,$00,$10
        EQUS $20,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$50,$A0,$A0,$A0,$A0,$50
        EQUS $00,$F0,$00,$50,$50,$A0,$A0,$00
        EQUS $F0,$00,$A0,$50,$50,$50,$50,$A0
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$50,$A0,$A0,$F0,$A0,$50
        EQUS $00,$F0,$00,$00,$50,$A0,$00,$00
        EQUS $F0,$00,$A0,$50,$F0,$50,$50,$A0
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$50,$A0,$F0,$A0,$A0,$50
        EQUS $00,$F0,$00,$00,$A0,$50,$00,$00
        EQUS $F0,$00,$A0,$50,$50,$F0,$50,$A0
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$50,$A0,$A0,$A0,$A0,$50
        EQUS $00,$F0,$00,$A0,$A0,$50,$50,$00
        EQUS $F0,$00,$A0,$50,$50,$50,$50,$A0
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$03,$01
        EQUS $00,$00,$00,$00,$00,$00,$03,$03
        EQUS $05,$00,$00,$00,$00,$00,$03,$03
        EQUS $0A,$00,$00,$00,$00,$00,$03,$02
        EQUS $00,$00,$05,$0A,$05,$00,$00,$01
        EQUS $03,$0A,$00,$00,$00,$0A,$05,$03
        EQUS $03,$05,$00,$00,$00,$05,$0A,$03
        EQUS $03,$00,$0A,$05,$0A,$00,$00,$02
        EQUS $03,$03,$01,$00,$00,$00,$00,$00
        EQUS $00,$03,$03,$05,$05,$05,$0A,$0A
        EQUS $0A,$03,$03,$0A,$0A,$0A,$05,$05
        EQUS $05,$03,$02,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$01
        EQUS $03,$0A,$0A,$0A,$05,$05,$05,$03
        EQUS $03,$05,$05,$05,$0A,$0A,$0A,$03
        EQUS $03,$00,$00,$00,$00,$00,$00,$02
        EQUS $03,$00,$00,$00,$00,$00,$00,$01
        EQUS $01,$01,$01,$01,$01,$03,$07,$0F
        EQUS $0F,$01,$00,$02,$02,$02,$03,$0B
        EQUS $0F,$00,$00,$02,$00,$00,$00,$02
        EQUS $02,$01,$01,$00,$00,$00,$00,$01
        EQUS $00,$0F,$07,$03,$01,$0A,$00,$00
        EQUS $05,$07,$0B,$03,$02,$00,$02,$00
        EQUS $00,$02,$02,$00,$00,$00,$00,$00
        EQUS $0A,$00,$00,$05,$05,$05,$05,$00
        EQUS $00,$05,$0F,$03,$03,$07,$0B,$0F
        EQUS $05,$0A,$0F,$07,$03,$03,$07,$0F
        EQUS $0A,$00,$00,$0A,$0A,$0A,$0A,$00
        EQUS $00,$01,$03,$03,$00,$01,$01,$01
        EQUS $01,$03,$03,$05,$0B,$0B,$07,$03
        EQUS $03,$03,$03,$01,$0A,$0B,$03,$03
        EQUS $03,$00,$02,$02,$00,$00,$00,$00
        EQUS $00,$00,$00,$01,$00,$01,$00,$00
        EQUS $00,$00,$01,$01,$02,$00,$00,$00
        EQUS $00,$03,$07,$07,$0F,$22,$39,$3C
        EQUS $33,$00,$00,$0A,$00,$00,$00,$3C
        EQUS $00,$00,$00,$00,$10,$10,$00,$14
        EQUS $00,$00,$10,$30,$30,$30,$28,$00
        EQUS $28,$30,$30,$30,$30,$30,$30,$14
        EQUS $14,$00,$00,$20,$20,$20,$20,$00
        EQUS $28

.L1FC0
        LDA #$FF
        LDY #$3F
.L1FC4
        STA L0610,Y
        DEY
        BPL L1FC4

        INY
        STY L0066
        STY L006D
        RTS

.L1FD0
        LDA L0066
        BEQ L1FE3

        CMP #$08
        BEQ L200F

        DEC L0067
.L1FDA
        BNE L200F

L1FDB = L1FDA+1
.L1FDC
        JSR L224E

L1FDD = L1FDC+1
        CMP #$13
.L1FE1
        BCC L200F

L1FE2 = L1FE1+1
.L1FE3
        LDX L008F
L1FE4 = L1FE3+1
.L1FE5
        STX L0067
L1FE6 = L1FE5+1
        AND #$01
        STA L0062
        TAX
        LDA L008D,X
        TAX
        INX
        LDA L0C6A,X
        STA L0061
        JSR L2235

        INC L0066
        LDY #$0E
.L1FFC
        LDA L0610,Y
        BMI L2005

        DEY
        DEY
        BPL L1FFC

.L2005
        LDA L0061
        STA L0611,Y
        LDA L0062
        STA L0610,Y
.L200F
        LDY #$0F
.L2011
        STY L0060
        LDA L0610,Y
        STA L0061
        LDA L060F,Y
        STA L0063
        BMI L204D

.L201F
        LDY L0063
.L2020
        LDA L0C6D,Y
        STA L0062
        JSR L223D

        LDX L0061
        LDY L0062
        LDA #$07
        JSR L0500

        BIT L0063
        BMI L205A

        LDX L0063
        CLC
        LDA L008D,X
        ADC L0061
        CMP #$9A
        BCS L205A

        DEX
        BNE L2048

        CMP #$50
        BEQ L205A

.L2048
        STA L0061
        JSR L223D

.L204D
        LDY L0060
.L204F
        LDA L0061
        STA L0610,Y
        DEY
        DEY
        BPL L2011

        BMI L2065

.L205A
        LDY L0060
        DEC L0066
        LDA #$FF
        STA L060F,Y
        BNE L204F

.L2065
        LDA L008C
        BEQ L206D

        DEC L008C
        BPL L20B3

.L206D
        LDA #$08
        STA L008C
        LDA #$78
        STA L006F
        LDA #$15
        STA L0075
        LDA #$00
        STA L0074
        LDX L006C
        LDY #$20
        LDA #$1F
        JSR PlotSpriteEOR       ; Sprite 32 wide

        CLC
        LDA L006C
        ADC L008D
        CLC
        ADC L008D
        STA L006C
        BEQ L2096

        CMP #$80
        BNE L209E

.L2096
        LDA L008D
        STA L008E
        EOR #$FE
        STA L008D
.L209E
        LDA #$15
        STA L0075
        LDA #$00
        STA L0074
        LDX L006C
        LDY #$20
        LDA #$1F
        JSR PlotSpriteEOR       ; Sprite 32 wide

        LDA #$18
        STA L006F
.L20B3
        JSR L224E

        CMP #$C8
        BCC L20C9

        LDA #$0A
        STA L0075
        LDA #$A0
        STA L0074
        LDX #$50
        LDY #$66
        JSR PlotSpriteEOR16

.L20C9
        JSR L21FC

        LDX L008D
        INX
        LDA L0C6F,X
        CLC
        ADC L006A
        AND #$70
        STA L006A
        LDA L0C70,X
        ADC L006B
        AND #$70
        STA L006B
        JSR L21FC

        DEC L000D
        BEQ L20EA

        RTS

.L20EA
        LDA #$16
        STA L000D
        LDA #$0A
        STA L0075
        LDA #$E0
        STA L0074
        LDX L000E
        LDY L000F
        LDA #$03
        JSR PlotSpriteEOR       ; Sprite 4 wide

        LDA L000F
        CLC
        ADC L0010
        CMP #$45
        BCC L210F

        CMP #$5D
        BCS L211A

        STA L000F
        RTS

.L210F
        LDA #$04
        STA L0010
        LDA L000E
        EOR #$94
        STA L000E
        RTS

.L211A
        LDA #$A0
        STA L000D
        LDA #$FC
        STA L0010
        RTS

.L2123
        LDA #$28
        STA L006F
        LDX #$04
.L2129
        STX L0060
        LDA L0611,X
        TAY
        LDA L0610,X
        TAX
        JSR L2224

        LDX L0060
        LDA L0610,X
        TAY
        LDA L0C7E,Y
        CLC
        ADC L0611,X
        CMP #$E8
        BCS L214B

        CMP #$50
        BCS L2154

.L214B
        TYA
        EOR #$01
        STA L0610,X
        JMP L2157

.L2154
        STA L0611,X
.L2157
        LDA L0611,X
        TAY
        LDA L0610,X
        TAX
        JSR L2224

        LDX L0060
        DEX
        DEX
        BPL L2129

        LDA #$18
        STA L006F
        RTS

.L216D
        LDY #$02
.L216F
        STY L0060
        LDA L0616,Y
        PHA
        JSR L2193

        PLA
        CLC
        ADC #$02
        LDY L0060
        STA L0616,Y
        JSR L2193

        LDX L0061
        LDY L0062
        LDA #$0E
        JSR L0500

        LDY L0060
        DEY
        BPL L216F

        RTS

.L2193
        TAX
        CPX #$81
        BCC L219A

        LDX #$80
.L219A
        STX L0061
        LSR A
        TAY
        LDA L2280,Y
        TAY
        STY L0062
        LDA #$C0
        CPY #$30
        BNE L21AC

        LDA #$80
.L21AC
        STA L0074
        LDA #$1E
        STA L0075
        JMP PlotSpriteEOR16

.L21B5
        LDA #$28
        STA L006F
        LDX #$01
        STX L0610
        STX L0612
        STX L0614
        LDY #$6E
        STY L0611
        JSR L2224

        LDY #$AA
        STY L0613
        LDX #$01
        JSR L2224

        LDY #$E6
        STY L0615
        LDX #$01
        JSR L2224

        LDA #$18
        STA L006F
        LDA #$00
        STA L0616
        JSR L2193

        LDA #$55
        STA L0617
        JSR L2193

        LDA #$AA
        STA L0618
        JMP L2193

.L21FC
        LDY #$03
.L21FE
        STY L0060
        JSR L2209

        LDY L0060
        DEY
        BPL L21FE

        RTS

.L2209
        LDA L006A
        CPY #$02
        BPL L2211

        LDA L006B
.L2211
        STA L0074
        LDA #$1E
        STA L0075
        LDA L0C74,Y
        TAX
        LDA L0C78,Y
        TAY
.L221F
        LDA #$07
        JMP PlotSpriteEOR       ; Sprite 8 wide

.L2224
        LDA L0C7C,X
        TAX
        LDA #$1D
        STA L0075
        LDA #$80
        STA L0074
        LDA #$07
        JMP PlotSpriteEOR       ; Sprite 8 wide

.L2235
        LDY L0062
        LDA L0C6D,Y
        TAY
        BNE L223F

.L223D
        LDY L0062
.L223F
        LDX L0061
        LDA #$11
        STA L0075
        LDA #$60
        STA L0074
        LDA #$07
        JMP PlotSpriteEOR       ; Sprite 8 wide

.L224E
        LDA L89AB,X
        ADC L0068
        STA L0068
        TAX
        LDA LCDEF,X
        ADC L0069
        STA L0069
.L225D
        RTS

.L225E
        JSR L224E

        CMP #$C8
        BCC L225D

        LDA #$0A
        STA L0075
        LDA #$A0
        STA L0074
        LDX #$04
        LDY #$D7
        JMP PlotSpriteEOR16

.L2274  ; Data
        EQUB $43,$3A,$42,$49,$54,$26,$38,$36
        EQUB $3A,$42,$50,$4C

.L2280  ; Data
        EQUB $30,$2c,$29,$26,$23,$20,$1e,$1c
        EQUB $1a,$19,$18,$18,$18,$18,$19,$1b
        EQUB $1c,$1f,$21,$24,$27,$2a,$2d,$30
        EQUB $2b,$28,$25,$22,$1f,$1d,$1b,$1a
        EQUB $18,$18,$18,$18,$18,$1a,$1b,$1d
        EQUB $1f,$22,$25,$28,$2b,$30,$2d,$2a
        EQUB $27,$24,$21,$1f,$1c,$1b,$19,$18
        EQUB $18,$18,$18,$19,$1a,$1c,$1e,$20
        EQUB $23,$26,$29,$2c,$2f,$31,$34,$38
        EQUB $3b,$3f,$42,$46,$49,$4d,$50,$54
        EQUB $58,$5b,$5f,$62,$66,$69,$6d,$70
        EQUB $74,$78,$7b,$7f,$82,$86,$89,$8d
        EQUB $90,$94,$98,$9b,$9f,$a2,$a6,$a9
        EQUB $ad,$b0,$b4,$b7,$bb,$bf,$c2,$c6
        EQUB $c9,$cd,$d0,$d4,$d7,$db,$df,$e2
        EQUB $e6,$e9,$ed,$f0,$f4,$f7,$fb,$ff
     
.L2300
        LDA L0085
        BEQ L2318

        LDA L008A
        BEQ L230D

        LDX #$00
        JSR PlaySound

.L230D
        LDA L0085
        CMP #$1F
        BNE L2318

        LDX #$08
        JSR PlaySound

.L2318
        LDA L0087
        BEQ L234E

        LDY #$03
        STY L0076
.L2320
        JSR L25FB

.L2323
        JSR L2549

        BEQ L2333

        INC L0081
        INC L0087
        DEC L0076
.L232E
        BNE L2323

        JMP L25FB

.L2333
        LDA L0082
        CMP #$04
        BCC L233D

        LDA L0084
        STA L0082
.L233D
        JSR L25FB

        LDA L0087
        LDX #$FF
        CMP #$14
        BCC L234A

        STX L008B
.L234A
        INX
        STX L0087
        RTS

.L234E
        LDA L0083
        BEQ L2396

        JSR L25FB

.L2355
        LDA L0080
        CLC
        ADC L0088
        CMP #$06
        BCC L2364

        CMP #$93
        BCS L2364

        STA L0080
.L2364
        LDA L0083
        CMP #$0D
        BCC L2370

        DEC L0081
        DEC L0081
        BNE L2382

.L2370
        CMP #$08
        BCS L2382

        JSR L2549

        BEQ L238B

        INC L0081
        JSR L2549

        BEQ L238B

        INC L0081
.L2382
        DEC L0083
        BNE L2393

        JSR L2549

        BNE L232E

.L238B
        LDA #$00
        STA L0083
        LDA L0084
        STA L0082
.L2393
        JMP L25FB

.L2396
        LDA L007B
        BMI L23A0

        JSR L267B

        JMP L23B4


.L23A0
        LDA #$81
        LDY #$04
.L23A4
        STY L0057
        LDX L007B,Y
        LDY #$FF
        JSR OSBYTE          ; Read key within time limit

        LDY L0057
        STX L0076,Y
        DEY
        BPL L23A4

.L23B4
        LDA L0082
        CMP #$04
        BCS L23F7

        BIT L0076
        BPL L23F0

        LDX #$10
        JSR PlaySound

        JSR L25FB

        LDA L0082
        STA L0084
        LSR A
        ORA #$06
        STA L0082
        LDX #$12
        STX L0083
        LDX #$00
        BIT L0079
        BPL L23DE

        CMP #$07
        BNE L23E7

        INX
.L23DE
        CMP #$06
        BNE L23E7

        BIT L007A
        BPL L23E7

        DEX
.L23E7
        STX L0088
        LDA #$00
        STA L008A
        JMP L2355

.L23F0
        LDA L0085
        BEQ L23F7

        JMP L24BF

.L23F7
        BIT L0077
        BPL L2455

        LDA L0086
        BNE L2409

        JSR L2545

        CMP #$40
        BEQ L2409

        JMP L24B9

.L2409
        JSR L25FB

        LDA #$FC
        BIT L0086
        BPL L241E

        BVS     L2426

        LDA #$FA
        INC L0089
.L2418
        LDX #$08
        LDY #$C0
        BNE L242C

.L241E
        BVC L2432

        LDY #$80
        STY L0086
        BNE L2432

.L2426
        LDA #$FB
        LDY #$00
        LDX #$01
.L242C
        STX L0082
        STY L0086
        BNE L243E

.L2432
        PHA
        LDA L0082
        EOR #$01
        AND #$01
        ORA #$04
        STA L0082
        PLA
.L243E
        CLC
        ADC L0081
        STA L0081
        LDA L0086
        BNE L2452

        JSR L2545

        CMP #$50
        BNE L2452

        LDA #$40
        STA L0086
.L2452
        JMP L25FB

.L2455
        BIT L0078
        BPL L24B9

        BIT L0086
        BMI L2473

        BVS     L2473

        LDA L0082
        CMP #$04
        BCS L2490

        JSR L2533

        CMP #$40
        BNE L24BF

        JSR L25FB

        LDA #$05
        BNE L2418

.L2473
        JSR L25FB

        BIT L0086
        BPL L248A

        BVC L2486

        DEC L0089
        LDA #$06
        LDY #$80
        LDX #$04
        BNE L242C

.L2486
        LDY #$40
        BNE L248C

.L248A
        LDY #$00
.L248C
        STY L0086
        BPL L249A

.L2490
        JSR L25FB

        JSR L2549

        CMP #$40
        BNE L24B6

.L249A
        LDA #$04
        CLC
        ADC L0081
        STA L0081
        LDA L0082
        EOR #$01
        AND #$01
        ORA #$04
        STA L0082
        JSR L2549

        CMP #$50
        BNE L24B6

        LDA #$01
        STA L0082
.L24B6
        JMP L25FB

.L24B9
        LDA L0082
        CMP #$04
        BCS L24F0

.L24BF
        BIT L0079
        BPL L24F1

        LDX L0080
        CPX #$92
        BCS L2508

        JSR L25FB

        INC L0080
        INC L0080
        LDA L0082
        AND #$01
        ORA #$02
.L24D6
        EOR #$01
        STA L0082
        JSR L257B

        JSR L25F1

        JSR L2549

        BEQ L24F0

        INC L0081
        JSR L2549

        BEQ L24EE

        INC L0087
.L24EE
        DEC L0081
.L24F0
        RTS

.L24F1
        BIT L007A
        BPL L2508

        LDX L0080
        CPX #$08
        BCC L2508

        JSR L25FB

        DEC L0080
        DEC L0080
        LDA L0082
        AND #$01
        BPL L24D6

.L2508
        LDA L0082
        CMP #$04
        BCS L24F0

        LDA L0085
        BNE L252A

        LDA L0080
        PHA
        LDA L0081
        PHA
        JSR L257B

        PLA
        TAY
        PLA
        CMP L0080
        BNE L2526

        CPY L0081
        BEQ L24F0

.L2526
        STA L0080
        STY L0081
.L252A
        JSR L25FB

        JSR L257B

        JMP L25F1

.L2533
        LDA #$19
.L2535
        LDX L0080
        CLC
        ADC L0081
        TAY
        JSR CalcXYAddress

        LDY #$00
        LDA (L0072),Y
        AND #$50
        RTS

.L2545
        LDA #$07
        BNE L2535

.L2549
        LDX L0080
        LDA L0081
        CLC
        ADC #$10
        TAY
        JSR CalcXYAddress

        LDA L0082
        AND #$02
        ASL A
        ASL A
        ASL A
        TAY
        LDA (L0072),Y
        AND #$50
        CMP #$50
        BEQ L2565
        RTS

.L2565
        STY L0057
        LDX L0080
        LDA L0081
        CLC
        ADC #$16
        TAY
        JSR CalcXYAddress

        LDY L0057
        LDA (L0072),Y
        AND #$50
        CMP #$50
        RTS

.L257B
        LDX L005B
        BNE L25B0

        LDX #$FF
        SEC
        LDA L0080
.L2584
        INX
        SBC #$0C
        BCS L2584

        LDA L0089
        TAY
        LSR A
        TXA
        BCS L2594

        EOR #$FF
        ADC #$01
.L2594
        CLC
        ADC L0C40,Y
        CPY #$05
        BEQ L25A7

        DEY
        BPL L25AD

        CPX #$04
        BCS L25AD

        LDA #$E7
        BNE L25AD

.L25A7
        CPX #$07
        BCS L25AD

        LDA #$30
.L25AD
        STA L0081
.L25AF
        RTS

.L25B0
        DEX
        BNE L25CA

        LDY L0081
        CPY #$B9
        BEQ L25C2

        CPY #$30
        BEQ L25C2

        INX
        CPY #$63
        BNE L25AF

.L25C2
        LDA L008D,X
        CLC
        ADC L0080
        STA L0080
        RTS

.L25CA
        DEX
        BNE L25AF

        LDA L0081
        CMP #$51
        BCC L25AF

        LDX L0080
        CPX #$14
        BCC L25AF

        CPX #$23
        BCS L25E5

        LDA L0C7E
.L25E0
        ADC L0081
        STA L0081
        RTS

.L25E5
        CPX #$3F
        BCC L25AF

        CPX #$53
        LDA L0C7F
        BCC L25E0

        RTS

.L25F1
        LDA L0085
        BEQ L25FB

        LDA L008A
        EOR #$01
        STA L008A
.L25FB
        LDA L0082
        CMP #$05
        BCC L2607

        AND #$01
        SEC
        ROL A
        BPL L2611

.L2607
        AND #$02
        ORA L008A
        EOR #$01
        STA L0057
        EOR #$01
.L2611
        LDX L0085
        BEQ L2633

        DEC L0085
        TAY
        CLC
        LDA L0C48,Y
        ADC L0080
        TAX
        LDA L0C50,Y
        STA L0074
        LDA #$0F
        STA L0075
        LDA L0C4C,Y
        ADC L0081
        TAY
        LDA #$07
        JSR PlotSpriteEOR       ; Sprite 8 wide

.L2633
        LDA L0082
        CMP #$04
        BCC L264F

        TAY
        LDA L0C54,Y
        STA L0074
        LDA L0C5D,Y
        STA L0075
        LDX L0080
        LDY L0081
        LDA #$00
        STA L008A
        JMP PlotSpriteEOR16

.L264F
        TAY
        LDA L0C66,Y
        STA L0074
        LDA L0C5D,Y
        STA L0075
        LDA #$0A
        ADC L0081
        TAY
        LDX L0080
        LDA #$05
        JSR PlotSpriteEOR       ; Sprite 6 wide

        LDY L0057
        LDA L0C54,Y
        STA L0074
        LDA L0C5D,Y
        STA L0075
        LDA #$09
        LDX L0080
        LDY L0081
        JMP PlotSpriteEOR       ; Sprite 10 wide

.L267B
        LDA #$80
        LDX #$00
        JSR OSBYTE          ; Read ADC channel/fire buttons/last conversion

        TXA
        LDX #$FF
        LSR A
        BCS L2689

        INX
.L2689
        STX L0076
        LDA #$80
        LDX #$02
        JSR OSBYTE          ; Read ADC channel/fire buttons/last conversion

        LDX #$00
        STX L0078
        STX L0077
        DEX
        CPY #$4C
        BCC L26A7

        CPY #$B4
        BCS L26A2

        INX
.L26A2
        STX L0077
        JMP L26A9

.L26A7
        STX L0078
.L26A9
        LDX #$01
        JSR OSBYTE          ;          ; Read ADC channel/fire buttons/last conversion


        LDX #$00
        STX L007A
        STX L0079
        DEX
        CPY #$4C
        BCC L26C1

        CPY #$B4
        BCS L26BE

        INX
.L26BE
        STX L007A
        RTS

.L26C1
        STX L0079
        RTS

.L26C5
        LDA L005E
        EOR #$24
        STA L005E
        LDA L006D
        CMP L006E
        BEQ L2731

        LDX L005B
        BNE L26EA

        LDA L0612
        BMI L2731

        LDA L0611
        CMP #$E6
        BCC L2731

        LDA L0610
        CMP #$04
        BCS L2731

        BCC L26FE

.L26EA
        DEX
        BNE L26F5

        LDA L0067
        AND #$FE
        BNE L2731

        BEQ L26FE

.L26F5
        DEX
        BEQ L26FE

        LDA L005D
        CMP #$0A
        BNE L2731

.L26FE
        LDX #$15
.L2700
        LDA L062A,X
        BMI L270A

        DEX
        DEX
        DEX
        BPL L2700

.L270A
        LDY L005B
        LDA L0C8A,Y
        STA L0628,X
        PHA
        CPY #$03
        BNE L271C

        LDA L0089
        ADC #$09
        TAY
.L271C
        LDA L0C8E,Y
        STA L0629,X
        PHA
        LDA #$01
        STA L062A,X
        PLA
        TAY
        PLA
        TAX
        INC L006D
        JSR L281F

.L2731
        LDX #$15
.L2733
        STX L0060
        LDA L0629,X
        STA L0062
        LDA L0628,X
        STA L0061
        LDA L062A,X
        STA L0063
        BPL L2749

        JMP L27F9

.L2749
        JSR L281B

        LDX L0061
        LDY L0062
        LDA #$0B
        JSR L0500

        BIT L0063
        BPL L275C

        JMP L2813

.L275C
        LDX L0063
        CLC
        LDA L0061
        ADC L0C80,X
        STA L0061
        CLC
        LDA L0062
        ADC L0C85,X
        STA L0062
        JSR L282C

        LDX L0063
        TXA
        LSR A
        BCC L27A2

        LDA L0077,X
        BNE L27A2

        LDA L005B
        BEQ L2790

        JSR L2871

        CLC
        LDA L0063
        ADC #$02
        AND #$03
        TAX
        LDA L0077,X
        BEQ L27C1

        BNE L27B7

.L2790
        DEC L0062
        JSR L282C

        LDX L0063
        LDA L0077,X
        BNE L27A2

        INC L0062
        INC L0062
        JSR L282C

.L27A2
        JSR L2871

        LDX L0063
        LDA L0078
        ORA L007A
        BEQ L27C1

        TXA
        LSR A
        BCC L27B7

        LDA L0077
        ORA L0079
        BEQ L27C1

.L27B7
        JSR L224E

        AND #$03
        TAX
        LDA L0077,X
        BEQ L27B7

.L27C1
        TXA
        LSR A
        BCC L27E4

        LDA L0077,X
        BNE L27D6

        LDA L007A
        BEQ L27D0

        DEX
        BEQ L27D4

.L27D0
        LDX #$01
        BNE L27D6

.L27D4
        LDX #$03
.L27D6
        LDA L0061
        CMP #$98
        BCC L27DE

        LDX #$03
.L27DE
        CMP #$03
        BCS L27E4

        LDX #$01
.L27E4
        LDA L0062
        CMP #$33
        BCS L27EC

        LDX #$02
.L27EC
        STX L0063
        LDX L0061
        LDY L0062
        LDA L005E
        EOR #$24
        JSR L2821

.L27F9
        LDX L0060
        LDA L0063
        STA L062A,X
.L2800
        LDA L0061
        STA L0628,X
        LDA L0062
        STA L0629,X
        DEX
        DEX
        DEX
        BMI L2812

        JMP L2733

.L2812
        RTS

.L2813
        DEC L006D
        LDA #$FF
        STA L0063
        BNE L27F9

.L281B
        LDX L0061
        LDY L0062
.L281F
        LDA L005E
.L2821
        STA L0074
        LDA #$1F
        STA L0075
        LDA #$0B
        JMP PlotSpriteEOR       ; Sprite 12 wide

.L282C
        CLC
        LDA L0062
        ADC #$0E
        TAY
        LDX L0061
        JSR CalcXYAddress

        LDY #$00
        LDA (L0072),Y
        STA L007A
        LDY #$18
        LDA (L0072),Y
        STA L0078
        CLC
        LDA L0062
        ADC #$14
        TAY
        LDX L0061
        JSR CalcXYAddress

        LDY #$00
        LDX #$FF
        LDA (L0072),Y
        AND L007A
        AND #$A0
        CMP #$A0
        BEQ L285D

        INX
.L285D
        STX L007A
        LDY #$18
        LDX #$FF
        LDA (L0072),Y
        AND L0078
        AND #$A0
        CMP #$A0
        BEQ L286E

        INX
.L286E
        STX L0078
        RTS

.L2871
        CLC
        LDA #$07
        ADC L0062
        TAY
        LDX L0061
        JSR CalcXYAddress

        LDY #$00
        LDX #$FF
        LDA (L0072),Y
        AND #$50
        CMP #$40
        BEQ L2889

        INX
.L2889
        STX L0077
        CLC
        LDA #$16
        ADC L0062
        TAY
        LDX L0061
        JSR CalcXYAddress

        LDY #$00
        LDX #$FF
        LDA (L0072),Y
        AND #$50
        CMP #$40
        BEQ L28A3

        INX
.L28A3
        STX L0079
        RTS

        NOP
.L28A7
        LDA L0066
        BNE L28C5

        INC L0066
        LDX #$1E
        STX L0610
        LDY #$26
        STY L0611
        LDA #$41
        STA L0612
        STA L0063
        JSR L29E4

        LDA L008F
        STA L0067
.L28C5
        DEC L0067
        BNE L2900

        LDA L008F
        STA L0067
        LDA L0066
        CMP #$08
        BEQ L2900

        JSR L224E

        BMI L2900

        LDY #$15
.L28DA
        LDA L0612,Y
        BMI L28E4

        DEY
        DEY
        DEY
        BPL L28DA

.L28E4
        LDA #$00
        STA L0612,Y
        STA L0063
        LDA #$20
        STA L0610,Y
        TAX
        LDA #$32
        STA L0611,Y
        TAY
        INC L0066
        JSR L29E4

        LDA #$0B
        STA L005F
.L2900
        LDA L005F
        BEQ L2907

        JSR L2A5C

.L2907
        LDY #$15
.L2909
        STY L0060
        LDA L0611,Y
        STA L0062
        LDA L0610,Y
        STA L0061
        LDA L0612,Y
        BPL L291D

        JMP L29AE

.L291D
        STA L0063
        JSR L29E0

        BIT L0063
        BVC L2929

        JMP L29BF

.L2929
        LDA L0063
        AND #$01
        BNE L2963

        JSR L2A1E

        BEQ L2936

        INC L0062
.L2936
        JSR L2A48

        BNE L2944

        JSR L224E

        CMP #$DC
        BCC L296A

        BCS L295E

.L2944
        LDX L0061
        CPX #$04
        BNE L2950

        LDY L0062
        CPY #$DC
        BCC L2954

.L2950
        CPX #$94
        BNE L296A

.L2954
        LDY L0062
        CPY L0055
        BCC L295E

        DEC L0063
        BNE L296A

.L295E
        INC L0063
        JMP L296A

.L2963
        JSR L2A1E

        BNE L2970

        INC L0063
.L296A
        LDA L0063
        AND #$03
        STA L0063
.L2970
        LDY L0063
.L2972
        CLC
        LDA L0062
        ADC L0C86,Y
        STA L0062
        CLC
        LDA L0061
        ADC L0C81,Y
        STA L0061
        CMP #$9A
        BCS L29B7

        TAX
        LDY L0062
        LDA #$08
        JSR L0500

        BIT L0063
        BMI L29B7

        LDA L005E
        EOR #$24
        LDX L0061
        LDY L0062
        JSR L29E6

.L299D
        LDY L0060
        LDA L0062
        STA L0611,Y
        LDA L0061
        STA L0610,Y
        LDA L0063
        STA L0612,Y
.L29AE
        DEY
        DEY
        DEY
        BMI L29B6

        JMP L2909

.L29B6
        RTS

.L29B7
        DEC L0066
        LDA #$FF
        STA L0063
        BNE L299D

.L29BF
        INC L0062
        JSR L2A1E

        BEQ L29DC

        INC L0062
        JSR L2A1E

        BEQ L29DC

        LDA L0062
        CLC
        ADC #$02
        STA L0062
        CMP #$E3
        BCC L29DC

        LDA #$01
        STA L0063
.L29DC
        LDY #$00
        BPL L2972

.L29E0
        LDX L0061
        LDY L0062
.L29E4
        LDA L005E
.L29E6
        PHA
        LDA L0063
        AND #$01
        BEQ L2A12

        CPX #$94
        BEQ L2A12

        CPX #$04
        BEQ L2A12

        DEX
        DEX
        PLA
        BEQ L29FC

        LDA #$74
.L29FC
        EOR #$A0
        STA L0074
        LDA #$1C
        STA L0075
        LDA #$28
        STA L006F
        LDA #$0B
        JSR PlotSpriteEOR       ; Sprite 12 wide

        LDA #$18
        STA L006F
        RTS

.L2A12
        PLA
        STA L0074
        LDA #$11
        STA L0075
        LDA #$0B
        JMP PlotSpriteEOR       ; Sprite 12 wide

.L2A1E
        LDX L0061
        CLC
        LDA L0062
        ADC #$0C
        TAY
        JSR CalcXYAddress

        LDY #$00
        LDA (L0072),Y
        AND #$50
        CMP #$50
        BEQ L2A34
        RTS

.L2A34
        LDX L0061
        CLC
        LDA L0062
        ADC #$12
        TAY
        JSR CalcXYAddress

        LDY #$00
        LDA (L0072),Y
        AND #$50
        CMP #$50
        RTS

.L2A48
        LDX L0061
        CLC
        LDA L0062
        ADC #$15
        TAY
        JSR CalcXYAddress

        LDY #$00
        LDA (L0072),Y
        AND #$50
        CMP #$40
        RTS

.L2A5C
        DEC L005F
        LSR A
        BCS L2A62
        RTS

.L2A62
        BEQ L2A68

        CMP #$05
        BNE L2A82

.L2A68
        LDX #$14
        LDY #$20
        LDA #$11
        STA L0075
        LDA #$80
        STA L0074
        LDA #$78
        STA L006F
        LDA #$1F
.L2A7A
        JSR PlotSpriteEOR       ; Sprite 32 wide
        LDA #$18
        STA L006F
        RTS

.L2A82
        CMP #$03
        BCS L2A9A

        LDX #$24
        LDY #$28
        LDA #$13
        STA L0075
        LDA #$80
.L2A90
        STA L0074
        LDA #$38
        STA L006F
        LDA #$17
        BNE L2A7A

.L2A9A
        LDX #$1C
        LDY #$28
        LDA #$14
        STA L0075
        LDA #$40
        BNE L2A90

        ; DATA ???????
        CLI
.L2AA7
        ROL L0020
L2AA8 = L2AA7+1
.L2AAA
        ORA L7F20,Y
L2AAB = L2AAA+1
        ORA L1F20,Y
        LDX #$12
        STX L0080
        LDY #$E7
        STY L0081
        LDA L0056
        ASL A
        ASL A
        STA L0057
        LSR A
        CMP #$09
        BCC L2AC6

        LDA #$08
.L2AC6
        STA L006E
        LDA #$23
        SBC L0057
        STA L008F
        JSR L2F7B

.L2AD1
        LDA #$0E
        STA L005D
.L2AD5
        JSR L2300

        JSR L2EF7

        LDA L005E
        PHA
        LDA #$00
        STA L005E
        JSR L28A7

        PLA
        STA L005E
        JSR L2F06

        JSR L26C5

        LDA L005E
        PHA
        LDA #$24
        STA L005E
        JSR L28A7

        PLA
        STA L005E
        JSR L2F06

        JSR L225E

        LDA L0080
        AND #$FE
        TAX
        LDY L0089
        BNE L2B13

        CPX #$0C
        BCS L2B56

        DEY
        STY L008B
        BNE L2B56

.L2B13
        CPY #$05
        BNE L2B21

        CPX #$34
        BCS L2B56

        LDY #$FF
        STY L008B
        BNE L2B56

.L2B21
        LDA L0641
        BEQ L2B3D

        CPX #$76
        BNE L2B3D

        LDY L0081
        CPY #$BB
        BNE L2B56

.L2B30
        LDA #$00
        STA L0641
        LDA #$30
        JSR L2F6C

        JMP L2B56

.L2B3D
        LDA L0642
        BEQ L2B56

        CPX #$0A
        BNE L2B56

        LDY L0081
        CPY #$53
        BNE L2B56

        LDA #$00
        STA L0642
        LDA #$2A
        JSR L2F6C

.L2B56
        JSR L0571

        LDA L008B
        BEQ L2B60

        JMP L2AAB

.L2B60
        LDY L0081
        CPY #$15
        BEQ L2B73

        DEC L005D
        BEQ L2B6D

        JMP L2AD5

.L2B6D
        JSR L1AC9

        JMP L2AD1

.L2B73
        LDA #$00
        LDY L0053
        JSR L1B24

        INC L005B
.L2B7C
        JSR L197F

        JSR L2F1F

        LDX #$08
        STX L0080
        LDY #$E4
        STY L0081
        LDA L0056
        ASL A
        CMP #$09
        BCC L2B93

        LDA #$08
.L2B93
        STA L006E
        LDA #$14
        STA L006C
        LDX #$FF
        STX L008E
        LDX #$01
        STX L008D
        LDX #$08
        STX L008C
        STX L000D
        LDY #$FC
        STY L0010
        LDX #$92
        STX L000E
        LDX #$5C
        STX L000F
        JSR L2F7B

.L2BB6
        LDA #$0E
        STA L005D
.L2BBA
        JSR L2300

        LDA #$0A
        JSR L2EF9

        JSR L26C5

        JSR L2F06

        JSR L1FD0

        JSR L2F06

        LDA L0080
        AND #$FE
        TAX
        LDY L0089
        BNE L2BF6

        LDA L0641
        BEQ L2BF3

        CPX #$4E
        BNE L2BF3

        LDA #$00
        STA L0641
        LDA #$60
.L2BE7
        LDY #$05
        JSR L1AE7

        LDA #$00
        LDY #$08
        JSR L1B24

.L2BF3
        JMP L2C80

.L2BF6
        CPX #$04
        BCC L2BFE

        CPX #$94
        BCC L2C04

.L2BFE
        LDA #$FF
        STA L008B
        BNE L2C80

.L2C04
        CPY #$02
        BNE L2C48

        LDA L0642
        BEQ L2C1A

        CPX #$30
        BNE L2C1A

        LDA #$00
        STA L0642
        LDA #$54
        BNE L2BE7

.L2C1A
        LDA L0643
        BEQ L2C2C

        CPX #$92
        BNE L2C2C

        LDA #$00
        STA L0643
        LDA #$5A
        BNE L2BE7

.L2C2C
        LDA L0644
        BEQ L2C80

        CPX #$0A
        BNE L2C80

        LDA L0081
        CMP #$88
        BNE L2C80

        LDA #$00
        STA L0644
        LDA #$48
        JSR L2F6C

        JMP L2C80

.L2C48
        CPY #$03
        BNE L2C54

        CPX #$42
        BCC L2C80

        CPX #$5E
        BCC L2BFE

.L2C54
        CPY #$04
        BNE L2C67

        CLC
        LDA L006C
        SBC #$08
        CMP L0080
        BCS L2C80

        ADC #$26
        CMP L0080
        BCS L2BFE

.L2C67
        LDA L0645
        BEQ L2C80

        CPX #$50
        BNE L2C80

        LDA L0081
        CMP #$B3
        BNE L2C80

        LDA #$00
        STA L0645
        LDA #$4E
        JSR L2F6C

.L2C80
        JSR L0571

        LDA L008B
        BEQ L2C8A

        JMP L2B7C

.L2C8A
        LDY L0081
        CPY #$15
        BEQ L2C9D

        DEC L005D
        BEQ L2C97

        JMP L2BBA

.L2C97
        JSR L1AC9

        JMP L2BB6

.L2C9D
        LDA #$00
        LDY L0053
        JSR L1B24

        INC L005B
.L2CA6
        JSR L197F

        JSR L2F1F

        LDX #$08
        STX L0080
        LDY #$D7
        STY L0081
        LDA #$01
        STA L006E
        JSR L21B5

        LDA L0056
        CMP #$03
        BCC L2CC3

        LDA #$02
.L2CC3
        STA L0C7F
        EOR #$FF
        TAX
        INX
        STX L0C7E
        JSR L2F7B

        LDX #$28
        JSR PlaySound

.L2CD5
        LDA #$0E
        STA L005D
.L2CD9
        JSR L2300

        LDA #$0A
        JSR L2EF9

        JSR L216D

        JSR L2F06

        JSR L2123

        JSR L26C5

        JSR L216D

        JSR L2F06

        LDA L0080
        AND #$FE
        TAX
        LDY L0081
        CPY #$DA
        BCC L2D04

.L2CFE
        LDA #$FF
        STA L008B
        BNE L2D63

.L2D04
        CPX #$20
        BCS L2D0C

        CPY #$51
        BCC L2CFE

.L2D0C
        CPY #$34
        BCS L2D14

        CPX #$30
        BCS L2D14

.L2D14
        LDA L0641
        BEQ L2D37

        CPX #$30
        BNE L2D37

        CPY #$B4
        BNE L2D63

        LDA #$00
        STA L0641
        LDA #$78
.L2D28
        LDY #$05
        JSR L1AE7

        LDA #$00
        LDY #$08
        JSR L1B24

        JMP L2D63

.L2D37
        LDA L0642
        BEQ L2D4D

        CPX #$06
        BNE L2D4D

        CPY #$69
        BNE L2D63

        LDA #$00
        STA L0642
        LDA #$72
        BNE L2D28

.L2D4D
        LDA L0643
        BEQ L2D63

        CPX #$92
        BNE L2D63

        CPY #$46
        BNE L2D63

        LDA #$00
        STA L0643
        LDA #$6C
        BNE L2D28

.L2D63
        JSR L0571

        LDA L008B
        BEQ L2D6D

        JMP L2CA6

.L2D6D
        LDY L0081
        CPY #$17
        BCC L2D80

        DEC L005D
        BEQ L2D7A

        JMP L2CD9

.L2D7A
        JSR L1AC9

        JMP L2CD5

.L2D80
        LDA #$00
        LDY L0053
        JSR L1B24

        INC L005B
.L2D89
        JSR L197F

        JSR L2F1F

        LDX #$08
        STX L0080
        LDY #$E4
        STY L0081
        STX L0066
        LDA L0056
        ASL A
        ADC #$04
        CMP #$09
        BCC L2DA4

        LDA #$08
.L2DA4
        STA L006E
        JSR L2F7B

.L2DA9
        LDA #$0E
        STA L005D
.L2DAD
        JSR L2300

        LDA #$0A
        JSR L2EF9

        JSR L2F06

        JSR L26C5

        JSR L2F06

        LDY L0089
        BEQ L2DF5

        LDA L0080
        AND #$FE
        TAX
        CPY #$04
        BNE L2E0A

        CPX #$39
        BCC L2DF8

        CPX #$60
        BCS L2DD9

        LDA #$FF
        STA L008B
        BNE L2DF5

.L2DD9
        LDA L0641
        BEQ L2E0A

        CPX #$78
        BNE L2E0A

        LDA #$00
        STA L0641
        LDA #$8A
.L2DE9
        LDY #$05
        JSR L1AE7

        LDA #$00
        LDY #$08
        JSR L1B24

.L2DF5
        JMP L2E7A

.L2DF8
        LDA L0642
        BEQ L2E0A

        CPX #$22
        BNE L2E0A

        LDA #$00
        STA L0642
        LDA #$84
        BNE L2DE9

.L2E0A
        LDY L0081
        LDA L0643
        BEQ L2E22

        CPY #$61
        BNE L2E22

        CPX #$4C
        BNE L2E7A

        LDA #$00
        STA L0643
        LDA #$90
        BNE L2E36

.L2E22
        LDA L0644
        BEQ L2E3C

        CPY #$8E
        BNE L2E3C

        CPX #$12
        BNE L2E7A

        LDA #$00
        STA L0644
        LDA #$96
.L2E36
        JSR L2F6C

        JMP L2E7A

.L2E3C
        LDY L0089
        TXA
        LDX L0082
        CPX #$02
        BCC L2E47

        SBC #$06
.L2E47
        LDX #$00
        CMP #$26
        BEQ L2E52

        INX
        CMP #$6E
        BNE L2E7A

.L2E52
        TXA
        LSR A
        TYA
        ROL A
        TAY
        LDA L0645,Y
        BEQ L2E7A

        LDA #$00
        STA L0645,Y
        LDA L0C96,X
        TAX
        LDY L0089
        LDA L0C91,Y
        TAY
        LDA #$0C
        STA L0075
        LDA #$E0
        STA L0074
        LDA #$07
        JSR PlotSpriteEOR       ; Sprite 8 wide

        DEC L0066
.L2E7A
        JSR L0571

        LDA L008B
        BEQ L2E84

        JMP L2D89

.L2E84
        LDA L0066
        BEQ L2E95

        DEC L005D
        BEQ L2E8F

        JMP L2DAD

.L2E8F
        JSR L1AC9

        JMP L2DA9

.L2E95
        LDA #$00
        STA L005B
        LDY L0053
        JSR L1B24

        JSR L25F1

        LDA #$0B
        STA L0059
        LDA #$F3
        LDY #$04
        JSR PutText

        LDY #$1A
        STY L0076
.L2EB0
        LDA #$0B
        JSR OSWRCH

        LDA L0076
        ASL A
        ASL A
        STA L0077
        LDA #$C8
        SEC
        SBC L0077
        STA L0B34
        LDX #$30
        JSR PlaySound

        DEC L0076
        BNE L2EB0

        LDA #$95
        STA L0B34
        LDA #$1A
        JSR OSWRCH          ; Restore default windows

        LDA #$A2
        LDY #$05
        JSR L1AE7

        JSR L2F4C

        LDA L005A
        CMP #$03
        BEQ L2EE8

        INC L005A
.L2EE8
        INC L0056
        LDA L0056
        CMP #$08
        BCC L2EF4

        LDA #$01
        STA L0056
.L2EF4
        JMP L2AAB

.L2EF7
        LDA #$08
.L2EF9
        CLC
        ADC L0081
        STA L0055
        CLC
        LDA L0080
        ADC #$07
        STA L0054
        RTS

.L2F06
        LDA #$01
        LDY #$0B
        LDX #$68
        JSR OSWORD          ; Read system clock

        LDA L0B68
        SEC
        SBC #$05
        CMP L005C
        BNE L2F06

        LDX L0B68
        STX L005C
        RTS

.L2F1F
        LDX #$00
        STX L005E
        STX L005F
        STX L0066
        STX L006A
        STX L006B
        STX L006D
        STX L0083
        STX L0085
        STX L0086
        STX L0087
        STX L0089
        STX L008A
        STX L008B
        LDA #$18
        STA L006F
        STA L0067
        LDY #$02
        STY L0082
        LDA #$80
        STA L0053
        JMP L1FC0

.L2F4C
        LDY #$00
.L2F4E
        INX
        BNE L2F4E

        INY
        BNE L2F4E

        LDA #$0F
        LDX #$00
        JSR OSBYTE          ; Flush all or just input buffer

        LDA #$81
        LDY #$03
        JSR OSBYTE          ; Read key within time limit

        CPY #$1B
        BNE L2F6B

.L2F66
        LDA #$7E
        JMP OSBYTE          ; Acknowledge detection of ESCAPE condition

.L2F6B
        RTS

.L2F6C
        LDY #$05
        JSR L1AE7

        JSR L25F1

        LDA #$FE
        STA L0085
        JMP L25F1

.L2F7B
        JSR L25FB

        JSR L2F06

        LDX #$30
        JMP PlaySound

.L2F86
        LDX #$18
        JSR PlaySound

        LDA #$10
        STA L0076
.L2F8F
        JSR L25F1

        LDA L0076
        AND #$07
        STA L0082
        JSR L25F1

        LDY #$00
.L2F9D
        DEX
        BNE L2F9D

        DEY
        BNE L2F9D

        DEC L0076
        BNE L2F8F

        LDA #$0F
        LDX #$00
        JMP OSBYTE          ; Flush all or just input buffer

;-------------------------------------------------------------------------
; 
;-------------------------------------------------------------------------
; On entry  : 
; On exit   :
;-------------------------------------------------------------------------
.L2FAE
        LDA #$1F
        JSR OSWRCH          ; Move text cursor to x,y
        LDA #$03            
        JSR OSWRCH          ; X position
        TYA
        JSR OSWRCH          ; Y position

        LDY #$02
.L2FBE
        LDA L0650,X
        JSR BCDtoScreen
        DEX
        DEY
        BPL L2FBE

        LDA #$20
        JSR OSWRCH
        JSR OSWRCH
        JSR OSWRCH          ; Print 3 spaces
        LDY #$05
        INX
.L2FD6
        LDA L0653,X
        JSR OSWRCH

        INX
        DEY
        BNE L2FD6
        RTS
;-------------------------------------------------------------------------

        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00

.L3000
        LDA #$38
        LDY #$29
        JSR PutText
        LDY #$07
        LDX #$02
.L300B
        STY L0076
        STX L0077
        JSR L2FAE

        LDY L0076
        LDA L0077
        CLC
        ADC #$08
        TAX
        INY
        CPY #$11
        BCC L300B
        RTS

        LDY #$02
.L3022
        LDA L0050,Y
        STA L06A0,Y
        DEY
        BPL L3022

        LDY #$50
.L302D
        LDA L0652,Y
        CMP L064A,Y
        BCC L3063

        BNE L304B

        LDA L0651,Y
        CMP L0649,Y
        BCC L3063

        BNE L304B

        LDA L0650,Y
        CMP L0648,Y
        BCC L3063

        BEQ L3063

.L304B
        LDX #$08
.L304D
        LDA L0657,Y
        PHA
        LDA L064F,Y
        STA L0657,Y
        PLA
        STA L064F,Y
        DEY
        DEX
        BNE L304D

        CPY #$00
        BNE L302D

.L3063
        CPY #$50
        BNE L3068
        RTS

.L3068
        STY L0078
        JSR L0400

        LDA #$1F
        JSR OSWRCH          ; Move text cursor to x,y

        LDA #$11
        JSR OSWRCH          ; Define text colour

        LDA L0078
        LSR A
        LSR A
        LSR A
        ADC #$07
        JSR OSWRCH

        LDY #$05
        LDA #$7F
.L3085
        JSR OSWRCH

        DEY
        BNE L3085

        LDY L0078
        LDX #$04
        LDA #$20
.L3091
        STA L0653,Y
        INY
        DEX
        BPL L3091

        LDA #$06
        STA L0059
        LDA #$C0
        LDY #$0E
        JSR PutText

        LDA #$00
        LDX #$B0
        LDY #$06
        JSR OSWORD          ; Read line from input

        PHP
        LDA #$CF
        LDY #$02
        JSR PutText

        LDA #$0B
        STA L0059
        LDA #$7F
        LDX #$00
.L30BC
        JSR OSWRCH          ; Backspace and delete

        DEX
        BNE L30BC

        PLP
        BCC L30C8

        JMP L2F66

.L30C8
        LDY L0078
        LDX #$00
.L30CC
        LDA L06B8,X
        CMP #$0D
        BEQ L30DC

        STA L0653,Y
        INY
        INX
        CPX #$05
        BNE L30CC

.L30DC
        RTS

; Copy one page
.L30DD
        LDY #$00
.L30DF
        LDA L3000,Y
        STA L0400,Y     ; copy 3000-30FF to 0400-04FF
        LDA L3100,Y
        STA L0500,Y     ; copy 3100-31FF to 0500-05FF
        LDA L3200,Y
        STA L0600,Y     ; copy 3200-32FF to 0600-06FF
        DEY
        BNE L30DF
        JMP L058E

        ; Data ?
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00
        
.L3100
        STA $57
        LDA L0080
        AND #$FE
        STA L0070
        LDA L0082
        CMP #$06
        BCC L3129

        CMP #$08
        BEQ L3129

        CPX L0070
        BNE L3129

        SEC
        TYA
        SBC L0081
        CMP #$0D
        BCC L3129

        CMP #$16
        BCS L3129

        LDA #$00
        LDY #$02
        JMP L1B24

.L3129
        CPX L0054
        BCS L315C

        CPY L0055
.L312F
        BCS L315C

        TXA
        ADC #$07
        CMP L0070
        BCC L315C

        CLC
        TYA
        ADC L0057
        CMP L0081
        BCC L315C

        LDA L0085
        BEQ L3158

        CPY L0081
        BCC L3158

        LDA L0082
        CMP #$04
        BCS L3158

        LDA L0082
        CMP #$02
        BCS L315D

        CPX L0070
        BCC L3161

.L3158
        LDA #$FF
        STA L008B
.L315C
        RTS

.L315D
        CPX L0070
        BCC L3158

.L3161
        LDX #$FF
        STX L0063
        LDX #$20
        JSR PlaySound

        LDA #$00
        LDY #$05
        JMP L1B24

        LDA L008B
        BNE L3176

        RTS

.L3176
        JSR L2F86

        DEC L005A
        BEQ L317E

        RTS

.L317E
        LDA #$0B
        STA L0059
        LDA #$E0
        LDY #$12
        JSR PutText

        JSR L2F4C

        BNE L3191

        ; This is location 058E when data is relocated
        JSR L1943

.L3191
        LDX #$FF
        TXS
        LDA #$0B
        STA L0059
        LDA #$82
        LDY #$5D
        JSR PutText

        JSR L0420

        LDA #$9C
        LDY #$05
        JSR L1AE7

        JSR L0400

.L31AC
        LDA #$78
        LDX L0B70       ; ???
        CPX #$60
        BNE L31B7

        LDA #$7D
.L31B7
        LDY #$04
        JSR PutText

.L31BC
        DEX
        BNE L31BC

        DEY
        BNE L31BC

.L31C2
        LDA #$81
        LDY #$FF
        LDX #$AE
        JSR OSBYTE          ; Read key within time limit

        INX
        BNE L31D8

        LDA L0B70
        EOR #$C9
        STA L0B70
        BNE L31AC

.L31D8
        LDA #$81
        LDY #$FF
        LDX #$9D
        JSR OSBYTE          ; Read key within time limit

        INX
        BNE L31EC

        LDA L007B
        ORA #$80
        STA L007B
        BNE L31FD

.L31EC
        LDA #$80
        LDX #$00
        JSR OSBYTE          ; Read ADC channel/fire buttons/last coversion

        TXA
        LSR A
        BCC L31C2

        LDA L007B
        AND #$7F
        STA L007B
.L31FD
        JMP L2AA8

.L3200
        EQUS $00,$00,$00,$00,$15,$00,$00,$15
        EQUS $15,$3F,$15,$3F,$15,$3F,$2A,$2A
        EQUS $2A,$3F,$2A,$3F,$2A,$3F,$15,$15
        EQUS $00,$00,$00,$00,$2A,$00,$00,$2A
        EQUS $00,$00,$00,$00,$15,$00,$00,$15
        EQUS $15,$3F,$15,$3F,$15,$3F,$2A,$2A
        EQUS $2A,$3F,$2A,$3F,$2A,$3F,$15,$15
        EQUS $00,$00,$00,$00,$2A,$00,$00,$2A
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $10,$00,$00

        ; High Scores
        EQUS "SOLAR"
        EQUS "001000"
        EQUS " SOFT"
        EQUS "001000"
        EQUS "SOLAR"
        EQUS "001000"
        EQUS " SOFT"
        EQUS "001000"
        EQUS "SOLAR"
        EQUS "001000"
        EQUS " SOFT"
        EQUS "001000"
        EQUS "SOLAR"
        EQUS "001000"
        EQUS " SOFT"
        EQUS "001000"
        EQUS "SOLAR"
        EQUS "001000"
        EQUS " SOFT"
        EQUS "001000"
        EQUS "SOLAR"
        EQUS "001000"
        EQUS " SOFT"

        EQUS $B8,$06,$05,$20,$7F,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00

        EQUS ": eman retnE"

        EQUS $12,$02,$1F,$12,$13,$1F,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00,$00,$00,$00,$00
        EQUS $00,$00,$00,$00

        ; Main entry point at address 4300
.L3300
        LDA #$8C
        LDX #$00
        LDY #$00
        JSR OSBYTE          ; Select cassette file system and set speed

        ; Relocation code from 1A00 to 0A00
        LDA #$00
        STA L0070
        STA L0072
        LDA #$0A
        STA L0071
        LDA #$1A
        STA L0073
        LDY #$00
.L3319
        LDA (L0072),Y
        STA (L0070),Y
        INY
        BNE L3319

        INC L0071
        INC L0073
        LDA L0073
        CMP #$43
        BNE L3319

        LDA #$E1
        LDX #$00
        JSR OSBYTE          ; Set base number for function-key codes

        JMP L30DD

        EQUS $00,$00,$00,$00,$00,$00,$00,$00

.L333C
        EQUS $00,$00

        EQUS $00,$00

.BeebDisEndAddr
SAVE "ZANY1.bin",BeebDisStartAddr,BeebDisEndAddr

if(0)
Begin:Strings discovered
string $0A0D 3 ; "xP:"
string $0A3D 3 ; "xP:"
string $0A67 3 ; "xP:"
string $0A7A 3 ; "Dj@"
string $0A8C 3 ; "`H`"
string $0AE0 4 ; "EEEE"
string $0B38 11 ; "TFOS RALOS "
string $0B46 12 ; "serocS  hgiH"
string $0B55 10 ; "GNOK  YNAZ"
string $0B62 5 ; " YNAZ"
string $0B82 12 ; "O: 'S' dnuoS"
string $0B91 45 ; ".yalp  ot NOTTUB KCITSYOJ  ro RAB ECAPS sserP"
string $0BC1 15 ; "? bmilc uoy nac"
string $0BD3 8 ; "hgih woH"
string $0BE0 5 ; "revO "
string $0BE6 6 ; " emaG "
string $0C15 11 ; "BBB~BBB~BBB"
string $0C23 5 ; "<Z<$f"
string $0C43 3 ; "r[*"
string $0C6E 5 ; "k`  `"
string $0C8B 3 ; "P2P"
string $0C94 4 ; "{P(p"
string $11BD 3 ; " 00"
string $11CD 3 ; "0 0"
string $11DD 3 ; "!11"
string $11F5 3 ; "333"
string $11FD 3 ; ""33"
string $1225 5 ; "###33"
string $1239 3 ; "000"
string $1241 3 ; "00 "
string $1245 3 ; "   "
string $1264 8 ; "000030!0"
string $12AC 4 ; "0000"
string $12B3 6 ; "00000 "
string $12BC 3 ; "   "
string $12C3 5 ; " 000 "
string $12CB 5 ; "00000"
string $12D3 12 ; " 0000 001###"
string $1325 3 ; "333"
string $1353 5 ; "33333"
string $135A 3 ; "03#"
string $13C3 4 ; "    "
string $13CD 3 ; "000"
string $13D9 3 ; "00!"
string $141A 5 ; "33 0 "
string $1433 5 ; "33333"
string $143A 6 ; "33"33""
string $14A3 5 ; "    0"
string $14B4 4 ; "00!!"
string $14CC 4 ; "3333"
string $14D3 5 ; "3"33""
string $14FA 6 ; "33 0 3"
string $153D 3 ; "#33"
string $154D 3 ; "3#3"
string $15A5 5 ; "###33"
string $15B9 3 ; "333"
string $15C1 3 ; "333"
string $162C 4 ; "3333"
string $1633 6 ; "33333#"
string $163C 3 ; "###"
string $164B 5 ; "33333"
string $1653 6 ; "#33333"
string $165C 3 ; "###"
string $1695 3 ; "#33"
string $16A5 3 ; "333"
string $16DD 3 ; "333"
string $16E5 3 ; "#33"
string $1764 4 ; "0008"
string $176B 6 ; ":erocS"
string $1837 5 ; "ndnm\"
string $183F 6 ; "F l(}S"
string $1857 3 ; "W;-"
string $1899 9 ; "x.(.pY(Yp"
string $18E3 7 ; "sJJfres"
string $18EB 6 ; "sherep"
string $18F4 5 ; "0eseq"
string $1907 3 ; "tQr"
string $1921 3 ; "8eo"
string $1982 3 ; "Y w"
string $1A1F 3 ; "&W "
string $1A32 3 ; "&W "
string $1AB4 6 ; "`HJJJJ"
string $1ABB 3 ; "i0 "
string $1AC4 3 ; "i0L"
string $1D98 8 ; "uuu  uuu"
string $1E12 4 ; "PPPP"
string $1E72 4 ; "PPPP"
string $1F94 4 ; ""9<3"
string $1FAA 4 ; "000("
string $1FAF 7 ; "(000000"
string $1FBA 4 ; "    "
string $1FDB 4 ; "3 N""
string $1FF4 4 ; "a 5""
string $201C 3 ; "c0."
string $2025 4 ; "b =""
string $2032 4 ; "$c0$"
string $2049 4 ; "a =""
string $20B2 4 ; "o N""
string $20D3 4 ; "ej)p"
string $20DC 4 ; "ek)p"
string $2133 3 ; " $""
string $2151 3 ; "LW!"
string $215F 3 ; " $""
string $21C9 3 ; " $""
string $21D3 3 ; " $""
string $21DD 3 ; " $""
string $225C 5 ; "i` N""
string $2274 18 ; "C:BIT&86:BPL0,)&# "
string $2292 10 ; "!$'*-0+(%""
string $22A9 10 ; ""%(+0-*'$!"
string $22BF 29 ; " #&),/148;?BFIMPTX[_bfimptx{"
string $2322 4 ; "% I%"
string $2374 3 ; " I%"
string $237B 3 ; " I%"
string $2386 3 ; " I%"
string $239A 4 ; " {&L"
string $23B9 3 ; "=$v"
string $23ED 3 ; "LU#"
string $23F6 3 ; "$$w"
string $23FF 3 ; " E%"
string $2447 3 ; " E%"
string $2454 3 ; "%$x"
string $2464 4 ; "+ 3%"
string $2492 4 ; "% I%"
string $24AB 3 ; " I%"
string $24BE 3 ; "1$y"
string $24DA 4 ; " {% "
string $24DF 4 ; "% I%"
string $24E7 3 ; " I%"
string $24F0 3 ; "`$z"
string $2517 5 ; "H {%h"
string $252C 5 ; "% {%L"
string $2541 4 ; "r)P`"
string $255D 3 ; "r)P"
string $2575 3 ; "r)P"
string $26C2 3 ; "y`D"
string $26C6 3 ; "^I$"
string $276D 4 ; "b ,("
string $277F 3 ; " q("
string $2791 4 ; "b ,("
string $279E 7 ; "b ,( q("
string $27B7 4 ; " N")"
string $27F3 6 ; "^I$ !("
string $280F 4 ; "L3'`"
string $2853 4 ; "r%z)"
string $2864 4 ; "r%x)"
string $2881 3 ; "r)P"
string $289B 3 ; "r)P"
string $28D2 6 ; "- N"0("
string $2904 3 ; " \*"
string $2921 4 ; ")$cP"
string $2935 4 ; "b H*"
string $293B 3 ; " N""
string $295F 5 ; "cLj) "
string $298E 4 ; "$c0%"
string $2993 3 ; "^I$"
string $2A10 3 ; "o`h"
string $2A2C 3 ; "r)P"
string $2A42 3 ; "r)P"
string $2A56 3 ; "r)P"
string $2AA6 4 ; "X& C"
string $2ACE 3 ; " {/"
string $2AFD 4 ; "/ ^""
string $2B36 7 ; "0 l/LV+"
string $2B52 6 ; "* l/ q"
string $2B76 3 ; "S $"
string $2B7B 3 ; "[ "
string $2BB3 3 ; " {/"
string $2C41 5 ; "H l/L"
string $2C7C 6 ; "N l/ q"
string $2C87 3 ; "L|+"
string $2CA0 3 ; "S $"
string $2CA5 3 ; "[ "
string $2CCD 3 ; " {/"
string $2CD1 3 ; "( p"
string $2CE0 5 ; ". m! "
string $2CE6 5 ; "/ #! "
string $2CEC 5 ; "& m! "
string $2D34 3 ; "Lc-"
string $2D83 3 ; "S $"
string $2D88 3 ; "[ "
string $2DA5 4 ; "n {/"
string $2DF5 3 ; "Lz."
string $2E36 6 ; " l/Lz."
string $2E79 3 ; "f q"
string $2E9A 3 ; "S $"
string $2EC4 3 ; "0 p"
string $2EDD 3 ; " L/"
string $2F82 3 ; "0Lp"
string $3078 5 ; "xJJJi"
string $30C5 3 ; "Lf/"
string $3166 3 ; "  p"
string $3189 3 ; " L/"
string $31F8 3 ; "{)"
string $320D 9 ; "?***?*?*?"
string $322D 9 ; "?***?*?*?"
string $3253 5 ; "SOLAR"
string $325B 5 ; " SOFT"
string $3263 5 ; "SOLAR"
string $326B 5 ; " SOFT"
string $3273 5 ; "SOLAR"
string $327B 5 ; " SOFT"
string $3283 5 ; "SOLAR"
string $328B 5 ; " SOFT"
string $3293 5 ; "SOLAR"
string $329B 5 ; " SOFT"
string $32A3 5 ; "SOLAR"
string $32AB 5 ; " SOFT"
string $32C0 12 ; ": eman retnE"
End:Strings discovered

endif
